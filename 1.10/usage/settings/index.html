
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data validation using Python type hints">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/latest/usage/settings/">
      
      
        <link rel="prev" href="../validation_decorator/">
      
      
        <link rel="next" href="../postponed_annotations/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.1">
    
    
      
        <title>Settings management - Pydantic</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.45e1311d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#environment-variable-names" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
              </button>
            
            
  <!-- the following line is displayed in the announcement bar -->
<!-- keep length under 164 characters (less HTML tags) to fit on 1280px desktop window -->
Pydantic's <a href="https://pydantic.dev/roadmap/">commercial roadmap</a> is out ðŸš€, and we'd love to hear your feedback ðŸ“¢!

          </div>
          
            <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pydantic" class="md-header__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Settings management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic" class="md-nav__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Field Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exporting_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exporting models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation decorator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Settings management
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Settings management
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secret-support" class="md-nav__link">
    <span class="md-ellipsis">
      Secret Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secret Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postponed annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage with mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage with devtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rich/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage with rich
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/pydantic-v2-alpha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic V2 Pre Release
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/pydantic-v2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic V2 Plan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing to pydantic
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pycharm_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visual_studio_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio Code
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hypothesis_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypothesis plugin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel_code_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Generation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secret-support" class="md-nav__link">
    <span class="md-ellipsis">
      Secret Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secret Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  
                  

  
  


  <h1>Settings management</h1>

<p>One of pydantic's most useful applications is settings management.</p>
<p>If you create a model that inherits from <code>BaseSettings</code>, the model initialiser will attempt to determine
the values of any fields not passed as keyword arguments by reading from the environment. (Default values
will still be used if the matching environment variable is not set.)</p>
<p>This makes it easy to:</p>
<ul>
<li>Create a clearly-defined, type-hinted application configuration class</li>
<li>Automatically read modifications to the configuration from environment variables</li>
<li>Manually override specific settings in the initialiser where desired (e.g. in unit tests)</li>
</ul>
<p>For example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python 3.7 and above</label><label for="__tabbed_1_2">Python 3.9 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Set</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PyObject</span><span class="p">,</span>
    <span class="n">RedisDsn</span><span class="p">,</span>
    <span class="n">PostgresDsn</span><span class="p">,</span>
    <span class="n">AmqpDsn</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">apple</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="s1">&#39;my_api_key&#39;</span><span class="p">)</span>

    <span class="n">redis_dsn</span><span class="p">:</span> <span class="n">RedisDsn</span> <span class="o">=</span> <span class="s1">&#39;redis://user:pass@localhost:6379/1&#39;</span>
    <span class="n">pg_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://user:pass@localhost:5432/foobar&#39;</span>
    <span class="n">amqp_dsn</span><span class="p">:</span> <span class="n">AmqpDsn</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@localhost:5672/&#39;</span>

    <span class="n">special_function</span><span class="p">:</span> <span class="n">PyObject</span> <span class="o">=</span> <span class="s1">&#39;math.cos&#39;</span>

    <span class="c1"># to override domains:</span>
    <span class="c1"># export my_prefix_domains=&#39;[&quot;foo.com&quot;, &quot;bar.com&quot;]&#39;</span>
    <span class="n">domains</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># to override more_settings:</span>
    <span class="c1"># export my_prefix_more_settings=&#39;{&quot;foo&quot;: &quot;x&quot;, &quot;apple&quot;: 1}&#39;</span>
    <span class="n">more_settings</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_prefix</span> <span class="o">=</span> <span class="s1">&#39;my_prefix_&#39;</span>  <span class="c1"># defaults to no prefix, i.e. &quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;auth_key&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;env&#39;</span><span class="p">:</span> <span class="s1">&#39;my_auth_key&#39;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s1">&#39;redis_dsn&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;env&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;service_redis_dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;redis_url&#39;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;auth_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;api_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;redis_dsn&#39;: RedisDsn(&#39;redis://user:pass@localhost:6379/1&#39;, ),</span>
<span class="sd">    &#39;pg_dsn&#39;: PostgresDsn(&#39;postgres://user:pass@localhost:5432/foobar&#39;, ),</span>
<span class="sd">    &#39;amqp_dsn&#39;: AmqpDsn(&#39;amqp://user:pass@localhost:5672/&#39;, scheme=&#39;amqp&#39;,</span>
<span class="sd">user=&#39;user&#39;, password=&#39;pass&#39;, host=&#39;localhost&#39;, host_type=&#39;int_domain&#39;,</span>
<span class="sd">port=&#39;5672&#39;, path=&#39;/&#39;),</span>
<span class="sd">    &#39;special_function&#39;: &lt;built-in function cos&gt;,</span>
<span class="sd">    &#39;domains&#39;: set(),</span>
<span class="sd">    &#39;more_settings&#39;: {&#39;foo&#39;: &#39;bar&#39;, &#39;apple&#39;: 1},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PyObject</span><span class="p">,</span>
    <span class="n">RedisDsn</span><span class="p">,</span>
    <span class="n">PostgresDsn</span><span class="p">,</span>
    <span class="n">AmqpDsn</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">apple</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="s1">&#39;my_api_key&#39;</span><span class="p">)</span>

    <span class="n">redis_dsn</span><span class="p">:</span> <span class="n">RedisDsn</span> <span class="o">=</span> <span class="s1">&#39;redis://user:pass@localhost:6379/1&#39;</span>
    <span class="n">pg_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://user:pass@localhost:5432/foobar&#39;</span>
    <span class="n">amqp_dsn</span><span class="p">:</span> <span class="n">AmqpDsn</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@localhost:5672/&#39;</span>

    <span class="n">special_function</span><span class="p">:</span> <span class="n">PyObject</span> <span class="o">=</span> <span class="s1">&#39;math.cos&#39;</span>

    <span class="c1"># to override domains:</span>
    <span class="c1"># export my_prefix_domains=&#39;[&quot;foo.com&quot;, &quot;bar.com&quot;]&#39;</span>
    <span class="n">domains</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># to override more_settings:</span>
    <span class="c1"># export my_prefix_more_settings=&#39;{&quot;foo&quot;: &quot;x&quot;, &quot;apple&quot;: 1}&#39;</span>
    <span class="n">more_settings</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_prefix</span> <span class="o">=</span> <span class="s1">&#39;my_prefix_&#39;</span>  <span class="c1"># defaults to no prefix, i.e. &quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;auth_key&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;env&#39;</span><span class="p">:</span> <span class="s1">&#39;my_auth_key&#39;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s1">&#39;redis_dsn&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;env&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;service_redis_dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;redis_url&#39;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;auth_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;api_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;redis_dsn&#39;: RedisDsn(&#39;redis://user:pass@localhost:6379/1&#39;, ),</span>
<span class="sd">    &#39;pg_dsn&#39;: PostgresDsn(&#39;postgres://user:pass@localhost:5432/foobar&#39;, ),</span>
<span class="sd">    &#39;amqp_dsn&#39;: AmqpDsn(&#39;amqp://user:pass@localhost:5672/&#39;, scheme=&#39;amqp&#39;,</span>
<span class="sd">user=&#39;user&#39;, password=&#39;pass&#39;, host=&#39;localhost&#39;, host_type=&#39;int_domain&#39;,</span>
<span class="sd">port=&#39;5672&#39;, path=&#39;/&#39;),</span>
<span class="sd">    &#39;special_function&#39;: &lt;built-in function cos&gt;,</span>
<span class="sd">    &#39;domains&#39;: set(),</span>
<span class="sd">    &#39;more_settings&#39;: {&#39;foo&#39;: &#39;bar&#39;, &#39;apple&#39;: 1},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<h2 id="environment-variable-names">Environment variable names<a class="headerlink" href="#environment-variable-names" title="Permanent link">&para;</a></h2>
<p>The following rules are used to determine which environment variable(s) are read for a given field:</p>
<ul>
<li>
<p>By default, the environment variable name is built by concatenating the prefix and field name.</p>
<ul>
<li>For example, to override <code>special_function</code> above, you could use:<div class="highlight"><pre><span></span><code>  export my_prefix_special_function=&#39;foo.bar&#39;
</code></pre></div>
</li>
</ul>
<ul>
<li>Note 1: The default prefix is an empty string.</li>
<li>Note 2: Field aliases are ignored when building the environment variable name.</li>
</ul>
</li>
</ul>
<ul>
<li>Custom environment variable names can be set in two ways:<ul>
<li><code>Config.fields['field_name']['env']</code> (see <code>auth_key</code> and <code>redis_dsn</code> above)</li>
<li><code>Field(..., env=...)</code> (see <code>api_key</code> above)</li>
</ul>
</li>
<li>When specifying custom environment variable names, either a string or a list of strings may be provided.<ul>
<li>When specifying a list of strings, order matters: the first detected value is used.</li>
<li>For example, for <code>redis_dsn</code> above, <code>service_redis_dsn</code> would take precedence over <code>redis_url</code>.</li>
</ul>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since <strong>v1.0</strong> <em>pydantic</em> does not consider field aliases when finding environment variables to populate settings
models, use <code>env</code> instead as described above.</p>
<p>To aid the transition from aliases to <code>env</code>, a warning will be raised when aliases are used on settings models
without a custom env var name. If you really mean to use aliases, either ignore the warning or set <code>env</code> to
suppress it.</p>
</div>
<p>Case-sensitivity can be turned on through the <code>Config</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python 3.7 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">redis_host</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<p>When <code>case_sensitive</code> is <code>True</code>, the environment variable names must match field names (optionally with a prefix),
so in this example
<code>redis_host</code> could only be modified via <code>export redis_host</code>. If you want to name environment variables
all upper-case, you should name attribute all upper-case too. You can still name environment variables anything
you like through <code>Field(..., env=...)</code>.</p>
<p>In Pydantic <strong>v1</strong> <code>case_sensitive</code> is <code>False</code> by default and all variable names are converted to lower-case internally.
If you want to define upper-case variable names on nested models like <code>SubModel</code> you have to
set <code>case_sensitive=True</code> to disable this behaviour.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Windows, Python's <code>os</code> module always treats environment variables as case-insensitive, so the
<code>case_sensitive</code> config setting will have no effect - settings will always be updated ignoring case.</p>
</div>
<h2 id="parsing-environment-variable-values">Parsing environment variable values<a class="headerlink" href="#parsing-environment-variable-values" title="Permanent link">&para;</a></h2>
<p>For most simple field types (such as <code>int</code>, <code>float</code>, <code>str</code>, etc.),
the environment variable value is parsed the same way it would
be if passed directly to the initialiser (as a string).</p>
<p>Complex types like <code>list</code>, <code>set</code>, <code>dict</code>, and sub-models are populated from the environment
by treating the environment variable's value as a JSON-encoded string.</p>
<p>Another way to populate nested complex variables is to configure your model with the <code>env_nested_delimiter</code>
config setting, then use an env variable with a name pointing to the nested module fields.
What it does is simply explodes your variable into nested models or dicts.
So if you define a variable <code>FOO__BAR__BAZ=123</code> it will convert it into <code>FOO={'BAR': {'BAZ': 123}}</code>
If you have multiple variables with the same structure they will be merged.</p>
<p>With the following environment variables:
<div class="highlight"><pre><span></span><code><span class="c1"># your environment</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">V0</span><span class="o">=</span><span class="m">0</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL</span><span class="o">=</span><span class="s1">&#39;{&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V2</span><span class="o">=</span>nested-2
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V3</span><span class="o">=</span><span class="m">3</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__DEEP__V4</span><span class="o">=</span>v4
</code></pre></div></p>
<p>You could load a settings module thus:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python 3.7 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_nested_delimiter</span> <span class="o">=</span> <span class="s1">&#39;__&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {</span>
<span class="sd">        &#39;v1&#39;: &#39;json-1&#39;,</span>
<span class="sd">        &#39;v2&#39;: b&#39;nested-2&#39;,</span>
<span class="sd">        &#39;v3&#39;: 3,</span>
<span class="sd">        &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;},</span>
<span class="sd">    },</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<p><code>env_nested_delimiter</code> can be configured via the <code>Config</code> class as shown above, or via the
<code>_env_nested_delimiter</code> keyword argument on instantiation.</p>
<p>JSON is only parsed in top-level fields, if you need to parse JSON in sub-models, you will need to implement
validators on those models.</p>
<p>Nested environment variables take precedence over the top-level environment variable JSON
(e.g. in the example above, <code>SUB_MODEL__V2</code> trumps <code>SUB_MODEL</code>).</p>
<p>You may also populate a complex type by providing your own parsing function to
the <code>parse_env_var</code> classmethod in the Config object.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python 3.7 and above</label><label for="__tabbed_4_2">Python 3.9 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">parse_env_var</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raw_val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;numbers&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">json_loads</span><span class="p">(</span><span class="n">raw_val</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">parse_env_var</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raw_val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;numbers&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">json_loads</span><span class="p">(</span><span class="n">raw_val</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<h2 id="dotenv-env-support">Dotenv (.env) support<a class="headerlink" href="#dotenv-env-support" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>dotenv file parsing requires <a href="https://pypi.org/project/python-dotenv/">python-dotenv</a> to be installed.
This can be done with either <code>pip install python-dotenv</code> or <code>pip install pydantic[dotenv]</code>.</p>
</div>
<p>Dotenv files (generally named <code>.env</code>) are a common pattern that make it easy to use environment variables in a
platform-independent manner.</p>
<p>A dotenv file follows the same general principles of all environment variables,
and looks something like:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ignore comment</span>
<span class="nv">ENVIRONMENT</span><span class="o">=</span><span class="s2">&quot;production&quot;</span>
<span class="nv">REDIS_ADDRESS</span><span class="o">=</span>localhost:6379
<span class="nv">MEANING_OF_LIFE</span><span class="o">=</span><span class="m">42</span>
<span class="nv">MY_VAR</span><span class="o">=</span><span class="s1">&#39;Hello world&#39;</span>
</code></pre></div>
<p>Once you have your <code>.env</code> file filled with variables, <em>pydantic</em> supports loading it in two ways:</p>
<p><strong>1.</strong> setting <code>env_file</code> (and <code>env_file_encoding</code> if you don't want the default encoding of your OS) on <code>Config</code>
in a <code>BaseSettings</code> class:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_file</span> <span class="o">=</span> <span class="s1">&#39;.env&#39;</span>
        <span class="n">env_file_encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
</code></pre></div>
<p><strong>2.</strong> instantiating a <code>BaseSettings</code> derived class with the <code>_env_file</code> keyword argument
(and the <code>_env_file_encoding</code> if needed):</p>
<div class="highlight"><pre><span></span><code><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">_env_file</span><span class="o">=</span><span class="s1">&#39;prod.env&#39;</span><span class="p">,</span> <span class="n">_env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</code></pre></div>
<p>In either case, the value of the passed argument can be any valid path or filename, either absolute or relative to the
current working directory. From there, <em>pydantic</em> will handle everything for you by loading in your variables and
validating them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a filename is specified for <code>env_file</code>, Pydantic will only check the current working directory and
won't check any parent directories for the <code>.env</code> file.</p>
</div>
<p>Even when using a dotenv file, <em>pydantic</em> will still read environment variables as well as the dotenv file,
<strong>environment variables will always take priority over values loaded from a dotenv file</strong>.</p>
<p>Passing a file path via the <code>_env_file</code> keyword argument on instantiation (method 2) will override
the value (if any) set on the <code>Config</code> class. If the above snippets were used in conjunction, <code>prod.env</code> would be loaded
while <code>.env</code> would be ignored.</p>
<p>If you need to load multiple dotenv files, you can pass the file paths as a <code>list</code> or <code>tuple</code>.</p>
<p>Later files in the list/tuple will take priority over earlier files.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>

<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="c1"># `.env.prod` takes priority over `.env`</span>
        <span class="n">env_file</span> <span class="o">=</span> <span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="s1">&#39;.env.prod&#39;</span>
</code></pre></div>
<p>You can also use the keyword argument override to tell Pydantic not to load any file at all (even if one is set in
the <code>Config</code> class) by passing <code>None</code> as the instantiation keyword argument, e.g. <code>settings = Settings(_env_file=None)</code>.</p>
<p>Because python-dotenv is used to parse the file, bash-like semantics such as <code>export</code> can be used which
(depending on your OS and environment) may allow your dotenv file to also be used with <code>source</code>,
see <a href="https://saurabh-kumar.com/python-dotenv/#usages">python-dotenv's documentation</a> for more details.</p>
<h2 id="secret-support">Secret Support<a class="headerlink" href="#secret-support" title="Permanent link">&para;</a></h2>
<p>Placing secret values in files is a common pattern to provide sensitive configuration to an application.</p>
<p>A secret file follows the same principal as a dotenv file except it only contains a single value and the file name
is used as the key. A secret file will look like the following:</p>
<p><code>/var/run/database_password</code>:
<div class="highlight"><pre><span></span><code>super_secret_database_password
</code></pre></div></p>
<p>Once you have your secret files, <em>pydantic</em> supports loading it in two ways:</p>
<p><strong>1.</strong> setting <code>secrets_dir</code> on <code>Config</code> in a <code>BaseSettings</code> class to the directory where your secret files are stored:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">database_password</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">secrets_dir</span> <span class="o">=</span> <span class="s1">&#39;/var/run&#39;</span>
</code></pre></div>
<p><strong>2.</strong> instantiating a <code>BaseSettings</code> derived class with the <code>_secrets_dir</code> keyword argument:</p>
<div class="highlight"><pre><span></span><code><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">_secrets_dir</span><span class="o">=</span><span class="s1">&#39;/var/run&#39;</span><span class="p">)</span>
</code></pre></div>
<p>In either case, the value of the passed argument can be any valid directory, either absolute or relative to the
current working directory. <strong>Note that a non existent directory will only generate a warning</strong>.
From there, <em>pydantic</em> will handle everything for you by loading in your variables and validating them.</p>
<p>Even when using a secrets directory, <em>pydantic</em> will still read environment variables from a dotenv file or the environment,
<strong>a dotenv file and environment variables will always take priority over values loaded from the secrets directory</strong>.</p>
<p>Passing a file path via the <code>_secrets_dir</code> keyword argument on instantiation (method 2) will override
the value (if any) set on the <code>Config</code> class.</p>
<h3 id="use-case-docker-secrets">Use Case: Docker Secrets<a class="headerlink" href="#use-case-docker-secrets" title="Permanent link">&para;</a></h3>
<p>Docker Secrets can be used to provide sensitive configuration to an application running in a Docker container.
To use these secrets in a <em>pydantic</em> application the process is simple. More information regarding creating, managing
and using secrets in Docker see the official
<a href="https://docs.docker.com/engine/reference/commandline/secret/">Docker documentation</a>.</p>
<p>First, define your Settings
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_secret_data</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">secrets_dir</span> <span class="o">=</span> <span class="s1">&#39;/run/secrets&#39;</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default Docker uses <code>/run/secrets</code> as the target mount point. If you want to use a different location, change
<code>Config.secrets_dir</code> accordingly.</p>
</div>
<p>Then, create your secret via the Docker CLI
<div class="highlight"><pre><span></span><code><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;This is a secret&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>secret<span class="w"> </span>create<span class="w"> </span>my_secret_data<span class="w"> </span>-
</code></pre></div></p>
<p>Last, run your application inside a Docker container and supply your newly created secret
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>pydantic-with-secrets<span class="w"> </span>--secret<span class="w"> </span>my_secret_data<span class="w"> </span>pydantic-app:latest
</code></pre></div></p>
<h2 id="field-value-priority">Field value priority<a class="headerlink" href="#field-value-priority" title="Permanent link">&para;</a></h2>
<p>In the case where a value is specified for the same <code>Settings</code> field in multiple ways,
the selected value is determined as follows (in descending order of priority):</p>
<ol>
<li>Arguments passed to the <code>Settings</code> class initialiser.</li>
<li>Environment variables, e.g. <code>my_prefix_special_function</code> as described above.</li>
<li>Variables loaded from a dotenv (<code>.env</code>) file.</li>
<li>Variables loaded from the secrets directory.</li>
<li>The default field values for the <code>Settings</code> model.</li>
</ol>
<h2 id="customise-settings-sources">Customise settings sources<a class="headerlink" href="#customise-settings-sources" title="Permanent link">&para;</a></h2>
<p>If the default order of priority doesn't match your needs, it's possible to change it by overriding
the <code>customise_sources</code> method on the <code>Config</code> class of your <code>Settings</code> .</p>
<p><code>customise_sources</code> takes three callables as arguments and returns any number of callables as a tuple. In turn these
callables are called to build the inputs to the fields of the settings class.</p>
<p>Each callable should take an instance of the settings class as its sole argument and return a <code>dict</code>.</p>
<h3 id="changing-priority">Changing Priority<a class="headerlink" href="#changing-priority" title="Permanent link">&para;</a></h3>
<p>The order of the returned callables decides the priority of inputs; first item is the highest priority.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python 3.7 and above</label><label for="__tabbed_5_2">Python 3.9 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PostgresDsn</span>
<span class="kn">from</span> <span class="nn">pydantic.env_settings</span> <span class="kn">import</span> <span class="n">SettingsSourceCallable</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">SettingsSourceCallable</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">init_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">database_dsn</span><span class="o">=</span><span class="s1">&#39;postgres://postgres@localhost:5432/kwargs_db&#39;</span><span class="p">))</span>
<span class="c1">#&gt; database_dsn=PostgresDsn(&#39;postgres://postgres@localhost:5432/env_db&#39;, )</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PostgresDsn</span>
<span class="kn">from</span> <span class="nn">pydantic.env_settings</span> <span class="kn">import</span> <span class="n">SettingsSourceCallable</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">SettingsSourceCallable</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">init_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">database_dsn</span><span class="o">=</span><span class="s1">&#39;postgres://postgres@localhost:5432/kwargs_db&#39;</span><span class="p">))</span>
<span class="c1">#&gt; database_dsn=PostgresDsn(&#39;postgres://postgres@localhost:5432/env_db&#39;, )</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<p>By flipping <code>env_settings</code> and <code>init_settings</code>, environment variables now have precedence over <code>__init__</code> kwargs.</p>
<h3 id="adding-sources">Adding sources<a class="headerlink" href="#adding-sources" title="Permanent link">&para;</a></h3>
<p>As explained earlier, <em>pydantic</em> ships with multiples built-in settings sources. However, you may occasionally
need to add your own custom sources, <code>customise_sources</code> makes this very easy:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Python 3.7 and above</label><label for="__tabbed_6_2">Python 3.9 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">def</span> <span class="nf">json_config_settings_source</span><span class="p">(</span><span class="n">settings</span><span class="p">:</span> <span class="n">BaseSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">encoding</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">__config__</span><span class="o">.</span><span class="n">env_file_encoding</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_file_encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">init_settings</span><span class="p">,</span>
                <span class="n">json_config_settings_source</span><span class="p">,</span>
                <span class="n">env_settings</span><span class="p">,</span>
                <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foobar=&#39;spam&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">def</span> <span class="nf">json_config_settings_source</span><span class="p">(</span><span class="n">settings</span><span class="p">:</span> <span class="n">BaseSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">encoding</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">__config__</span><span class="o">.</span><span class="n">env_file_encoding</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">env_file_encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">init_settings</span><span class="p">,</span>
                <span class="n">json_config_settings_source</span><span class="p">,</span>
                <span class="n">env_settings</span><span class="p">,</span>
                <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foobar=&#39;spam&#39;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script is complete, it should run "as is")</em></p>
<h3 id="removing-sources">Removing sources<a class="headerlink" href="#removing-sources" title="Permanent link">&para;</a></h3>
<p>You might also want to disable a source:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Python 3.7 and above</label><label for="__tabbed_7_2">Python 3.9 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>
<span class="kn">from</span> <span class="nn">pydantic.env_settings</span> <span class="kn">import</span> <span class="n">SettingsSourceCallable</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_api_key</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">SettingsSourceCallable</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
            <span class="c1"># here we choose to ignore arguments from init_settings</span>
            <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">my_api_key</span><span class="o">=</span><span class="s1">&#39;this is ignored&#39;</span><span class="p">))</span>
<span class="c1">#&gt; my_api_key=&#39;xxx&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseSettings</span>
<span class="kn">from</span> <span class="nn">pydantic.env_settings</span> <span class="kn">import</span> <span class="n">SettingsSourceCallable</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_api_key</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">SettingsSourceCallable</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">SettingsSourceCallable</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
            <span class="c1"># here we choose to ignore arguments from init_settings</span>
            <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">my_api_key</span><span class="o">=</span><span class="s1">&#39;this is ignored&#39;</span><span class="p">))</span>
<span class="c1">#&gt; my_api_key=&#39;xxx&#39;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(This script requires <code>MY_API_KEY</code> env variable to be set, e.g. <code>export MY_API_KEY=xxx</code>)</em></p>












                
  <script src="/flarelytics/client.js"></script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../extra/redirects.js"></script>
      
    
  </body>
</html>