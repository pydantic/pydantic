
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Support for loading a settings or config class from environment variables or secrets files.">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/latest/concepts/pydantic_settings/">
      
      
        <link rel="prev" href="../conversion_table/">
      
      
        <link rel="next" href="../performance/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Settings Management - Pydantic Validation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Settings Management - Pydantic Validation" >
      
        <meta  property="og:description"  content="Support for loading a settings or config class from environment variables or secrets files." >
      
        <meta  property="og:image"  content="https://docs.pydantic.dev/latest/assets/images/social/concepts/pydantic_settings.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.pydantic.dev/latest/concepts/pydantic_settings/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Settings Management - Pydantic Validation" >
      
        <meta  name="twitter:description"  content="Support for loading a settings or config class from environment variables or secrets files." >
      
        <meta  name="twitter:image"  content="https://docs.pydantic.dev/latest/assets/images/social/concepts/pydantic_settings.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#settings-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  <!-- the following line is displayed in the announcement bar -->
<!-- keep length under 164 characters (less HTML tags) to fit on 1280px desktop window -->
What's new &mdash; we've launched
<a href="https://pydantic.dev/articles/logfire-announcement">Pydantic Logfire</a>
<img alt="ðŸ”¥" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f525.svg" title=":fire:">
to help you monitor and understand your
<a href="https://logfire.pydantic.dev/docs/integrations/pydantic/" id="logfire-app-type" target="_blank">Pydantic validations.</a>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pydantic Validation" class="md-header__button md-logo" aria-label="Pydantic Validation" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic Validation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Settings Management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" id="searchbox" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" required="">
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button id="searchbox-clear" type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
        </button>
      </nav>

        <div class="md-search__suggest"></div>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0">
        <div class="md-search-result">
          <div class="md-search-result__meta" id="type-to-start-searching">Type to start searching</div>
          <ol class="md-search-result__list" id="hits" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../models/" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/base_model/" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../internals/architecture/" class="md-tabs__link">
          
  
  Internals

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/files/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../errors/errors/" class="md-tabs__link">
          
  
  Error Messages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/logfire/" class="md-tabs__link">
          
  
  Integrations

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://blog.pydantic.dev/" class="md-tabs__link">
        
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../pydantic_people/" class="md-tabs__link">
        
  
    
  
  Pydantic People

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic Validation" class="md-nav__button md-logo" aria-label="Pydantic Validation" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic Validation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why use Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help_with_pydantic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help with Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alias/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forward_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Forward Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strict Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type Adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Decorator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion Table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-of-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment variable names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      Case-sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parsing environment variable values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-json-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling JSON parsing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-model-default-partial-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Nested model default partial updates
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-support" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      The Basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals-and-enums" class="md-nav__link">
    <span class="md-ellipsis">
      Literals and Enums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subcommands-and-positional-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Subcommands and Positional Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-cli-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Creating CLI Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-cli-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous CLI Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Asynchronous CLI Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asynchronous-subcommands" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous Subcommands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializing-cli-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing CLI Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutually-exclusive-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Mutually Exclusive Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-cli-experience" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the CLI Experience
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the CLI Experience">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-displayed-program-name" class="md-nav__link">
    <span class="md-ellipsis">
      Change the Displayed Program Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-boolean-flags" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Boolean Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore-and-retrieve-unknown-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Ignore and Retrieve Unknown Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-kebab-case-for-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Kebab Case for Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-whether-cli-should-exit-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Change Whether CLI Should Exit on Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforce-required-arguments-at-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Enforce Required Arguments at CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-none-type-parse-string" class="md-nav__link">
    <span class="md-ellipsis">
      Change the None Type Parse String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-none-type-values" class="md-nav__link">
    <span class="md-ellipsis">
      Hide None Type Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-adding-json-cli-options" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Adding JSON CLI Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-class-docstring-for-group-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Use Class Docstring for Group Help Text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-cli-flag-prefix-character" class="md-nav__link">
    <span class="md-ellipsis">
      Change the CLI Flag Prefix Character
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suppressing-fields-from-cli-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Suppressing Fields from CLI Help Text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-shortcuts-for-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Shortcuts for Arguments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-existing-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating with Existing Parsers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nested Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-plain-directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Plain Directory Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-nested-directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Nested Directory Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-multiple-nested-directories" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Multiple Nested Directories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir_missing" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir_max_size" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir_max_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_nested_subdir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_nested_subdir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_prefix
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-secrets-manager" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Secrets Manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-key-vault" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Key Vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Azure Key Vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snake-case-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Snake case conversion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dash-to-underscore-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Dash to underscore mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-cloud-secret-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Google Cloud Secret Manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Google Cloud Secret Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcp-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      GCP Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Important Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-settings-source" class="md-nav__link">
    <span class="md-ellipsis">
      Other settings source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other settings source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject.toml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-the-result-of-previous-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the result of previous sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#in-place-reloading" class="md-nav__link">
    <span class="md-ellipsis">
      In-place reloading
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/root_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RootModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeAdapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/validate_call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate Call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/aliases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aliases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/standard_library_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Library Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/annotated_handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotated Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core.core_schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Extra Types
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Extra Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_country/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Country
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_payment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_phone_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phone Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_routing_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_coordinate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_mac_address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac Address
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_isbn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISBN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_pendulum_dt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pendulum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_currency_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_language_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_script_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_semantic_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semantic Version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_timezone_name/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timezone Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ULID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Internals
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Internals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/resolving_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resolving Annotations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validating File Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web and API Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/queues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Queues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/orms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/custom_validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Validators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Error Messages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Error Messages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/validation_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/usage_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Errors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/logfire/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Logfire
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/llms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dev Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Dev Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pyrefly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pyrefly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pycharm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hypothesis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypothesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/visual_studio_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/datamodel_code_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datamodel-code-generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/devtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/rich/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rich
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Production Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Production Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/aws_lambda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://blog.pydantic.dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic_people/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic People
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-of-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment variable names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      Case-sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parsing environment variable values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-json-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling JSON parsing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-model-default-partial-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Nested model default partial updates
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-support" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      The Basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals-and-enums" class="md-nav__link">
    <span class="md-ellipsis">
      Literals and Enums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subcommands-and-positional-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Subcommands and Positional Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-cli-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Creating CLI Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-cli-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous CLI Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Asynchronous CLI Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asynchronous-subcommands" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous Subcommands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serializing-cli-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing CLI Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutually-exclusive-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Mutually Exclusive Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-cli-experience" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the CLI Experience
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the CLI Experience">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-displayed-program-name" class="md-nav__link">
    <span class="md-ellipsis">
      Change the Displayed Program Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-boolean-flags" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Boolean Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore-and-retrieve-unknown-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Ignore and Retrieve Unknown Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-kebab-case-for-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Kebab Case for Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-whether-cli-should-exit-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Change Whether CLI Should Exit on Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforce-required-arguments-at-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Enforce Required Arguments at CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-none-type-parse-string" class="md-nav__link">
    <span class="md-ellipsis">
      Change the None Type Parse String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-none-type-values" class="md-nav__link">
    <span class="md-ellipsis">
      Hide None Type Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-adding-json-cli-options" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Adding JSON CLI Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-class-docstring-for-group-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Use Class Docstring for Group Help Text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-cli-flag-prefix-character" class="md-nav__link">
    <span class="md-ellipsis">
      Change the CLI Flag Prefix Character
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suppressing-fields-from-cli-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Suppressing Fields from CLI Help Text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-shortcuts-for-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Shortcuts for Arguments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-existing-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating with Existing Parsers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nested Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-plain-directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Plain Directory Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-nested-directory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Nested Directory Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-case-multiple-nested-directories" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Multiple Nested Directories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir_missing" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir_max_size" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir_max_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_nested_subdir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_nested_subdir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_prefix
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-secrets-manager" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Secrets Manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-key-vault" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Key Vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Azure Key Vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#snake-case-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Snake case conversion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dash-to-underscore-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Dash to underscore mapping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-cloud-secret-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Google Cloud Secret Manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Google Cloud Secret Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcp-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      GCP Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Important Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-settings-source" class="md-nav__link">
    <span class="md-ellipsis">
      Other settings source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other settings source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject.toml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-the-result-of-previous-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the result of previous sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#in-place-reloading" class="md-nav__link">
    <span class="md-ellipsis">
      In-place reloading
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  
                  

  
  


<h1 id="settings-management">Settings Management<a class="headerlink" href="#settings-management" title="Permanent link">&para;</a></h1>
<p><a href="https://github.com/pydantic/pydantic-settings">Pydantic Settings</a> provides optional Pydantic features for loading a settings or config class from environment variables or secrets files.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>Installation is as simple as:</p>
<div class="language-bash highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pydantic-settings
</code></pre></div>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>If you create a model that inherits from <code>BaseSettings</code>, the model initialiser will attempt to determine
the values of any fields not passed as keyword arguments by reading from the environment. (Default values
will still be used if the matching environment variable is not set.)</p>
<p>This makes it easy to:</p>
<ul>
<li>Create a clearly-defined, type-hinted application configuration class</li>
<li>Automatically read modifications to the configuration from environment variables</li>
<li>Manually override specific settings in the initialiser where desired (e.g. in unit tests)</li>
</ul>
<p>For example:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AliasChoices</span><span class="p">,</span>
    <span class="n">AmqpDsn</span><span class="p">,</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
    <span class="n">ImportString</span><span class="p">,</span>
    <span class="n">PostgresDsn</span><span class="p">,</span>
    <span class="n">RedisDsn</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">validation_alias</span><span class="o">=</span><span class="s1">&#39;my_auth_key&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>

    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;my_api_key&#39;</span><span class="p">)</span>  <span class="c1"># (2)!</span>

    <span class="n">redis_dsn</span><span class="p">:</span> <span class="n">RedisDsn</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s1">&#39;redis://user:pass@localhost:6379/1&#39;</span><span class="p">,</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;service_redis_dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;redis_url&#39;</span><span class="p">),</span>  <span class="c1"># (3)!</span>
    <span class="p">)</span>
    <span class="n">pg_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://user:pass@localhost:5432/foobar&#39;</span>
    <span class="n">amqp_dsn</span><span class="p">:</span> <span class="n">AmqpDsn</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@localhost:5672/&#39;</span>

    <span class="n">special_function</span><span class="p">:</span> <span class="n">ImportString</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;math.cos&#39;</span>  <span class="c1"># (4)!</span>

    <span class="c1"># to override domains:</span>
    <span class="c1"># export my_prefix_domains=&#39;[&quot;foo.com&quot;, &quot;bar.com&quot;]&#39;</span>
    <span class="n">domains</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># to override more_settings:</span>
    <span class="c1"># export my_prefix_more_settings=&#39;{&quot;foo&quot;: &quot;x&quot;, &quot;apple&quot;: 1}&#39;</span>
    <span class="n">more_settings</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">()</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>  <span class="c1"># (5)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;auth_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;api_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;redis_dsn&#39;: RedisDsn(&#39;redis://user:pass@localhost:6379/1&#39;),</span>
<span class="sd">    &#39;pg_dsn&#39;: PostgresDsn(&#39;postgres://user:pass@localhost:5432/foobar&#39;),</span>
<span class="sd">    &#39;amqp_dsn&#39;: AmqpDsn(&#39;amqp://user:pass@localhost:5672/&#39;),</span>
<span class="sd">    &#39;special_function&#39;: math.cos,</span>
<span class="sd">    &#39;domains&#39;: set(),</span>
<span class="sd">    &#39;more_settings&#39;: {&#39;foo&#39;: &#39;bar&#39;, &#39;apple&#39;: 1},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>
<p>The environment variable name is overridden using <code>validation_alias</code>. In this case, the environment variable
   <code>my_auth_key</code> will be read instead of <code>auth_key</code>.</p>
<p>Check the <a href="../fields/"><code>Field</code> documentation</a> for more information.</p>
</li>
<li>
<p>The environment variable name is overridden using <code>alias</code>. In this case, the environment variable
   <code>my_api_key</code> will be used for both validation and serialization instead of <code>api_key</code>.</p>
<p>Check the <a href="../fields/#field-aliases"><code>Field</code> documentation</a> for more information.</p>
</li>
<li>
<p>The <a class="autorefs autorefs-internal" href="../../api/aliases/#pydantic.aliases.AliasChoices"><code>AliasChoices</code></a> class allows to have multiple environment variable names for a single field.
   The first environment variable that is found will be used.</p>
<p>Check the <a href="../alias/#aliaspath-and-aliaschoices">documentation on alias choices</a> for more information.</p>
</li>
<li>
<p>The <a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.ImportString"><code>ImportString</code></a> class allows to import an object from a string.
   In this case, the environment variable <code>special_function</code> will be read and the function <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/math.html#math.cos"><code>math.cos</code></a> will be imported.</p>
</li>
<li>
<p>The <code>env_prefix</code> config setting allows to set a prefix for all environment variables.</p>
<p>Check the <a href="#environment-variable-names">Environment variable names documentation</a> for more information.</p>
</li>
</ol>
<h2 id="validation-of-default-values">Validation of default values<a class="headerlink" href="#validation-of-default-values" title="Permanent link">&para;</a></h2>
<p>Unlike pydantic <code>BaseModel</code>, default values of <code>BaseSettings</code> fields are validated by default.
You can disable this behaviour by setting <code>validate_default=False</code> either in <code>model_config</code>
or on field level by <code>Field(validate_default=False)</code>:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings1</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings1</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>
</code></pre></div>
<p>Check the <a href="../fields/#validate-default-values">validation of default values</a> for more information.</p>
<h2 id="environment-variable-names">Environment variable names<a class="headerlink" href="#environment-variable-names" title="Permanent link">&para;</a></h2>
<p>By default, the environment variable name is the same as the field name.</p>
<p>You can change the prefix for all environment variables by setting the <code>env_prefix</code> config setting,
or via the <code>_env_prefix</code> keyword argument on instantiation:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span>  <span class="c1"># will be read from `my_prefix_auth_key`</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default <code>env_prefix</code> is <code>''</code> (empty string). <code>env_prefix</code> is not only for env settings but also for
dotenv files, secrets, and other sources.</p>
</div>
<p>If you want to change the environment variable name for a single field, you can use an alias.</p>
<p>There are two ways to do this:</p>
<ul>
<li>Using <code>Field(alias=...)</code> (see <code>api_key</code> above)</li>
<li>Using <code>Field(validation_alias=...)</code> (see <code>auth_key</code> above)</li>
</ul>
<p>Check the <a href="../fields/#field-aliases"><code>Field</code> aliases documentation</a> for more information about aliases.</p>
<p><code>env_prefix</code> does not apply to fields with alias. It means the environment variable name is the same
as field alias:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FooAlias&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li><code>env_prefix</code> will be ignored and the value will be read from <code>FooAlias</code> environment variable.</li>
</ol>
<h3 id="case-sensitivity">Case-sensitivity<a class="headerlink" href="#case-sensitivity" title="Permanent link">&para;</a></h3>
<p>By default, environment variable names are case-insensitive.</p>
<p>If you want to make environment variable names case-sensitive, you can set the <code>case_sensitive</code> config setting:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">redis_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
</code></pre></div>
<p>When <code>case_sensitive</code> is <code>True</code>, the environment variable names must match field names (optionally with a prefix),
so in this example <code>redis_host</code> could only be modified via <code>export redis_host</code>. If you want to name environment variables
all upper-case, you should name attribute all upper-case too. You can still name environment variables anything
you like through <code>Field(validation_alias=...)</code>.</p>
<p>Case-sensitivity can also be set via the <code>_case_sensitive</code> keyword argument on instantiation.</p>
<p>In case of nested models, the <code>case_sensitive</code> setting will be applied to all nested models.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">RedisSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">redis</span><span class="p">:</span> <span class="n">RedisSettings</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;host&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;redis&#39;: {&#39;host&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}}</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;HOST&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>  <span class="c1"># (1)!</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    redis.host</span>
<span class="sd">      Field required [type=missing, input_value={&#39;HOST&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>Note that the <code>host</code> field is not found because the environment variable name is <code>HOST</code> (all upper-case).</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Windows, Python's <code>os</code> module always treats environment variables as case-insensitive, so the
<code>case_sensitive</code> config setting will have no effect - settings will always be updated ignoring case.</p>
</div>
<h2 id="parsing-environment-variable-values">Parsing environment variable values<a class="headerlink" href="#parsing-environment-variable-values" title="Permanent link">&para;</a></h2>
<p>By default environment variables are parsed verbatim, including if the value is empty. You can choose to
ignore empty environment variables by setting the <code>env_ignore_empty</code> config setting to <code>True</code>. This can be
useful if you would prefer to use the default value for a field rather than an empty value from the
environment.</p>
<p>For most simple field types (such as <code>int</code>, <code>float</code>, <code>str</code>, etc.), the environment variable value is parsed
the same way it would be if passed directly to the initialiser (as a string).</p>
<p>Complex types like <code>list</code>, <code>set</code>, <code>dict</code>, and sub-models are populated from the environment by treating the
environment variable's value as a JSON-encoded string.</p>
<p>Another way to populate nested complex variables is to configure your model with the <code>env_nested_delimiter</code>
config setting, then use an environment variable with a name pointing to the nested module fields.
What it does is simply explodes your variable into nested models or dicts.
So if you define a variable <code>FOO__BAR__BAZ=123</code> it will convert it into <code>FOO={'BAR': {'BAZ': 123}}</code>
If you have multiple variables with the same structure they will be merged.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sub model has to inherit from <code>pydantic.BaseModel</code>, Otherwise <code>pydantic-settings</code> will initialize sub model,
collects values for sub model fields separately, and you may get unexpected results.</p>
</div>
<p>As an example, given the following environment variables:
<div class="language-bash highlight"><pre><span></span><code><span class="c1"># your environment</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">V0</span><span class="o">=</span><span class="m">0</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL</span><span class="o">=</span><span class="s1">&#39;{&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V2</span><span class="o">=</span>nested-2
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V3</span><span class="o">=</span><span class="m">3</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__DEEP__V4</span><span class="o">=</span>v4
</code></pre></div></p>
<p>You could load them into the following settings model:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (1)!</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (2)!</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>
<p>Sub model has to inherit from <code>pydantic.BaseModel</code>.</p>
</li>
<li>
<p>Sub model has to inherit from <code>pydantic.BaseModel</code>.</p>
</li>
</ol>
<p><code>env_nested_delimiter</code> can be configured via the <code>model_config</code> as shown above, or via the
<code>_env_nested_delimiter</code> keyword argument on instantiation.</p>
<p>By default environment variables are split by <code>env_nested_delimiter</code> into arbitrarily deep nested fields. You can limit
the depth of the nested fields with the <code>env_nested_max_split</code> config setting. A common use case this is particularly useful
is for two-level deep settings, where the <code>env_nested_delimiter</code> (usually a single <code>_</code>) may be a substring of model
field names. For example:</p>
<div class="language-bash highlight"><pre><span></span><code><span class="c1"># your environment</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">GENERATION_LLM_PROVIDER</span><span class="o">=</span><span class="s1">&#39;anthropic&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">GENERATION_LLM_API_KEY</span><span class="o">=</span><span class="s1">&#39;your-api-key&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">GENERATION_LLM_API_VERSION</span><span class="o">=</span><span class="s1">&#39;2024-03-15&#39;</span>
</code></pre></div>
<p>You could load them into the following settings model:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">LLMConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">provider</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;openai&#39;</span>
    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">api_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;azure&#39;</span>
    <span class="n">api_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;2023-03-15-preview&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">GenerationConfig</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="n">env_nested_max_split</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;GENERATION_&#39;</span>
    <span class="p">)</span>

    <span class="n">llm</span><span class="p">:</span> <span class="n">LLMConfig</span>
    <span class="o">...</span>


<span class="nb">print</span><span class="p">(</span><span class="n">GenerationConfig</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;llm&#39;: {</span>
<span class="sd">        &#39;provider&#39;: &#39;anthropic&#39;,</span>
<span class="sd">        &#39;api_key&#39;: &#39;your-api-key&#39;,</span>
<span class="sd">        &#39;api_type&#39;: &#39;azure&#39;,</span>
<span class="sd">        &#39;api_version&#39;: &#39;2024-03-15&#39;,</span>
<span class="sd">    }</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<p>Without <code>env_nested_max_split=1</code> set, <code>GENERATION_LLM_API_KEY</code> would be parsed as <code>llm.api.key</code> instead of <code>llm.api_key</code>
and it would raise a <code>ValidationError</code>.</p>
<p>Nested environment variables take precedence over the top-level environment variable JSON
(e.g. in the example above, <code>SUB_MODEL__V2</code> trumps <code>SUB_MODEL</code>).</p>
<p>You may also populate a complex type by providing your own source class.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic.fields</span><span class="w"> </span><span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">EnvSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">EnvSettingsSource</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;numbers&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">MyCustomSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
<h3 id="disabling-json-parsing">Disabling JSON parsing<a class="headerlink" href="#disabling-json-parsing" title="Permanent link">&para;</a></h3>
<p>pydantic-settings by default parses complex types from environment variables as JSON strings. If you want to disable
this behavior for a field and parse the value in your own validator, you can annotate the field with
<a href="../../api/pydantic_settings/#pydantic_settings.NoDecode"><code>NoDecode</code></a>:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">field_validator</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">NoDecode</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">NoDecode</span><span class="p">]</span>  <span class="c1"># (1)!</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s1">&#39;numbers&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;before&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decode_numbers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
<ol>
<li>The <code>NoDecode</code> annotation disables JSON parsing for the <code>numbers</code> field. The <code>decode_numbers</code> field validator
   will be called to parse the value.</li>
</ol>
<p>You can also disable JSON parsing for all fields by setting the <code>enable_decoding</code> config setting to <code>False</code>:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">field_validator</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">enable_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s1">&#39;numbers&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;before&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decode_numbers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
<p>You can force JSON parsing for a field by annotating it with <a href="../../api/pydantic_settings/#pydantic_settings.ForceDecode"><code>ForceDecode</code></a>.
This will bypass the <code>enable_decoding</code> config setting:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">field_validator</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">ForceDecode</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">enable_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">numbers</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">ForceDecode</span><span class="p">]</span>
    <span class="n">numbers1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>  <span class="c1"># (1)!</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s1">&#39;numbers1&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;before&#39;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decode_numbers1</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;]&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3], &#39;numbers1&#39;: [1, 2, 3]}</span>
</code></pre></div>
<ol>
<li>The <code>numbers1</code> field is not annotated with <code>ForceDecode</code>, so it will not be parsed as JSON.
   and we have to provide a custom validator to parse the value.</li>
</ol>
<h2 id="nested-model-default-partial-updates">Nested model default partial updates<a class="headerlink" href="#nested-model-default-partial-updates" title="Permanent link">&para;</a></h2>
<p>By default, Pydantic settings does not allow partial updates to nested model default objects. This behavior can be
overriden by setting the <code>nested_model_default_partial_update</code> flag to <code>True</code>, which will allow partial updates on
nested model default object fields.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">val</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SettingsPartialUpdate</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">,</span> <span class="n">nested_model_default_partial_update</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="n">nested_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SettingsNoPartialUpdate</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">,</span> <span class="n">nested_model_default_partial_update</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>

    <span class="n">nested_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="c1"># Apply a partial update to the default object using environment variables</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;NESTED_MODEL__FLAG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;True&#39;</span>

<span class="c1"># When partial update is enabled, the existing SubModel instance is updated</span>
<span class="c1"># with nested_model.flag=True change</span>
<span class="k">assert</span> <span class="n">SettingsPartialUpdate</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;nested_model&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;flag&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># When partial update is disabled, a new SubModel instance is instantiated</span>
<span class="c1"># with nested_model.flag=True change</span>
<span class="k">assert</span> <span class="n">SettingsNoPartialUpdate</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;nested_model&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;flag&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="dotenv-env-support">Dotenv (.env) support<a class="headerlink" href="#dotenv-env-support" title="Permanent link">&para;</a></h2>
<p>Dotenv files (generally named <code>.env</code>) are a common pattern that make it easy to use environment variables in a
platform-independent manner.</p>
<p>A dotenv file follows the same general principles of all environment variables, and it looks like this:</p>
<div class="language-bash highlight"><span class="filename">.env</span><pre><span></span><code><span class="c1"># ignore comment</span>
<span class="nv">ENVIRONMENT</span><span class="o">=</span><span class="s2">&quot;production&quot;</span>
<span class="nv">REDIS_ADDRESS</span><span class="o">=</span>localhost:6379
<span class="nv">MEANING_OF_LIFE</span><span class="o">=</span><span class="m">42</span>
<span class="nv">MY_VAR</span><span class="o">=</span><span class="s1">&#39;Hello world&#39;</span>
</code></pre></div>
<p>Once you have your <code>.env</code> file filled with variables, <em>pydantic</em> supports loading it in two ways:</p>
<ol>
<li>Setting the <code>env_file</code> (and <code>env_file_encoding</code> if you don't want the default encoding of your OS) on <code>model_config</code>
in the <code>BaseSettings</code> class:
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div></li>
<li>Instantiating the <code>BaseSettings</code> derived class with the <code>_env_file</code> keyword argument
(and the <code>_env_file_encoding</code> if needed):
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>


<span class="hll"><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">_env_file</span><span class="o">=</span><span class="s1">&#39;prod.env&#39;</span><span class="p">,</span> <span class="n">_env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div>
In either case, the value of the passed argument can be any valid path or filename, either absolute or relative to the
current working directory. From there, <em>pydantic</em> will handle everything for you by loading in your variables and
validating them.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a filename is specified for <code>env_file</code>, Pydantic will only check the current working directory and
won't check any parent directories for the <code>.env</code> file.</p>
</div>
<p>Even when using a dotenv file, <em>pydantic</em> will still read environment variables as well as the dotenv file,
<strong>environment variables will always take priority over values loaded from a dotenv file</strong>.</p>
<p>Passing a file path via the <code>_env_file</code> keyword argument on instantiation (method 2) will override
the value (if any) set on the <code>model_config</code> class. If the above snippets were used in conjunction, <code>prod.env</code> would be loaded
while <code>.env</code> would be ignored.</p>
<p>If you need to load multiple dotenv files, you can pass multiple file paths as a tuple or list. The files will be
loaded in order, with each file overriding the previous one.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="c1"># `.env.prod` takes priority over `.env`</span>
        <span class="n">env_file</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="s1">&#39;.env.prod&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
<p>You can also use the keyword argument override to tell Pydantic not to load any file at all (even if one is set in
the <code>model_config</code> class) by passing <code>None</code> as the instantiation keyword argument, e.g. <code>settings = Settings(_env_file=None)</code>.</p>
<p>Because python-dotenv is used to parse the file, bash-like semantics such as <code>export</code> can be used which
(depending on your OS and environment) may allow your dotenv file to also be used with <code>source</code>,
see <a href="https://saurabh-kumar.com/python-dotenv/#usages">python-dotenv's documentation</a> for more details.</p>
<p>Pydantic settings consider <code>extra</code> config in case of dotenv file. It means if you set the <code>extra=forbid</code> (<em>default</em>)
on <code>model_config</code> and your dotenv file contains an entry for a field that is not defined in settings model,
it will raise <code>ValidationError</code> in settings construction.</p>
<p>For compatibility with pydantic 1.x BaseSettings you should use <code>extra=ignore</code>:
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pydantic settings loads all the values from dotenv file and passes it to the model, regardless of the model's <code>env_prefix</code>.
So if you provide extra values in a dotenv file, whether they start with <code>env_prefix</code> or not,
a <code>ValidationError</code> will be raised.</p>
</div>
<h2 id="command-line-support">Command Line Support<a class="headerlink" href="#command-line-support" title="Permanent link">&para;</a></h2>
<p>Pydantic settings provides integrated CLI support, making it easy to quickly define CLI applications using Pydantic
models. There are two primary use cases for Pydantic settings CLI:</p>
<ol>
<li>When using a CLI to override fields in Pydantic models.</li>
<li>When using Pydantic models to define CLIs.</li>
</ol>
<p>By default, the experience is tailored towards use case #1 and builds on the foundations established in <a href="#parsing-environment-variable-values">parsing
environment variables</a>. If your use case primarily falls into #2, you will likely
want to enable most of the defaults outlined at the end of <a href="#creating-cli-applications">creating CLI applications</a>.</p>
<h3 id="the-basics">The Basics<a class="headerlink" href="#the-basics" title="Permanent link">&para;</a></h3>
<p>To get started, let's revisit the example presented in <a href="#parsing-environment-variable-values">parsing environment
variables</a> but using a Pydantic settings CLI:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;example.py&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--v0=0&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model={&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v2=nested-2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v3=3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.deep.v4=v4&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<p>To enable CLI parsing, we simply set the <code>cli_parse_args</code> flag to a valid value, which retains similar connotations as
defined in <code>argparse</code>.</p>
<p>Note that a CLI settings source is <a href="#field-value-priority"><strong>the topmost source</strong></a> by default unless its <a href="#customise-settings-sources">priority value
is customised</a>:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_foo</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_FOO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;from environment&#39;</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_foo=from cli&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_foo&#39;: &#39;from environment&#39;}</span>
</code></pre></div>
<h4 id="lists">Lists<a class="headerlink" href="#lists" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of lists supports intermixing of any of the below three styles:</p>
<ul>
<li>JSON style <code>--field='[1,2]'</code></li>
<li>Argparse style <code>--field 1 --field 2</code></li>
<li>Lazy style <code>--field=1,2</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;[1,2]&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1,2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>
</code></pre></div>
<h4 id="dictionaries">Dictionaries<a class="headerlink" href="#dictionaries" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of dictionaries supports intermixing of any of the below two styles:</p>
<ul>
<li>JSON style <code>--field='{"k1": 1, "k2": 2}'</code></li>
<li>Environment variable style <code>--field k1=1 --field k2=2</code></li>
</ul>
<p>These can be used in conjunction with list forms as well, e.g:</p>
<ul>
<li><code>--field k1=1,k2=2 --field k3=3 --field '{"k4": 4}'</code> etc.</li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k1=1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k2=2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>
</code></pre></div>
<h4 id="literals-and-enums">Literals and Enums<a class="headerlink" href="#literals-and-enums" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of literals and enums are converted into CLI choices.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">IntEnum</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Fruit</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">pear</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">kiwi</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">lime</span> <span class="o">=</span> <span class="mi">2</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fruit</span><span class="p">:</span> <span class="n">Fruit</span>
    <span class="n">pet</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;bird&#39;</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">,</span> <span class="s1">&#39;--pet&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;fruit&#39;: &lt;Fruit.lime: 2&gt;, &#39;pet&#39;: &#39;cat&#39;}</span>
</code></pre></div>
<h4 id="aliases">Aliases<a class="headerlink" href="#aliases" title="Permanent link">&para;</a></h4>
<p>Pydantic field aliases are added as CLI argument aliases. Aliases of length one are converted into short options.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;lname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fname&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John,Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>
</code></pre></div>
<h3 id="subcommands-and-positional-arguments">Subcommands and Positional Arguments<a class="headerlink" href="#subcommands-and-positional-arguments" title="Permanent link">&para;</a></h3>
<p>Subcommands and positional arguments are expressed using the <code>CliSubCommand</code> and <code>CliPositionalArg</code> annotations. The
subcommand annotation can only be applied to required fields (i.e. fields that do not have a default value).
Furthermore, subcommands must be a valid type derived from either a pydantic <code>BaseModel</code> or pydantic.dataclasses
<code>dataclass</code>.</p>
<p>Parsed subcommands can be retrieved from model instances using the <code>get_subcommand</code> utility function. If a subcommand is
not required, set the <code>is_required</code> flag to <code>False</code> to disable raising an error if no subcommand is found.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CLI settings subcommands are limited to a single subparser per model. In other words, all subcommands for a model
are grouped under a single subparser; it does not allow for multiple subparsers with each subparser having its own
set of subcommands. For more information on subparsers, see <a href="https://docs.python.org/3/library/argparse.html#sub-commands">argparse
subcommands</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>CliSubCommand</code> and <code>CliPositionalArg</code> are always case sensitive.</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliPositionalArg</span><span class="p">,</span>
    <span class="n">CliSubCommand</span><span class="p">,</span>
    <span class="n">SettingsError</span><span class="p">,</span>
    <span class="n">get_subcommand</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Init</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Clone</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">repository</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Git</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">clone</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Clone</span><span class="p">]</span>
    <span class="n">init</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Init</span><span class="p">]</span>


<span class="c1"># Run without subcommands</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">]</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="n">Git</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">cmd</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;clone&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Will raise an error since no subcommand was provided</span>
    <span class="n">get_subcommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;Error: CLI subcommand is required {clone, init}&#39;</span>

<span class="c1"># Will not raise an error since subcommand is not required</span>
<span class="k">assert</span> <span class="n">get_subcommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">is_required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>


<span class="c1"># Run the clone subcommand</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;clone&#39;</span><span class="p">,</span> <span class="s1">&#39;repo&#39;</span><span class="p">,</span> <span class="s1">&#39;dest&#39;</span><span class="p">]</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="n">Git</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">cmd</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;clone&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;repository&#39;</span><span class="p">:</span> <span class="s1">&#39;repo&#39;</span><span class="p">,</span> <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;dest&#39;</span><span class="p">},</span>
    <span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Returns the subcommand model instance (in this case, &#39;clone&#39;)</span>
<span class="k">assert</span> <span class="n">get_subcommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;dest&#39;</span><span class="p">,</span>
    <span class="s1">&#39;repository&#39;</span><span class="p">:</span> <span class="s1">&#39;repo&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>CliSubCommand</code> and <code>CliPositionalArg</code> annotations also support union operations and aliases. For unions of Pydantic
models, it is important to remember the <a href="https://docs.pydantic.dev/latest/concepts/unions/">nuances</a> that can arise
during validation. Specifically, for unions of subcommands that are identical in content, it is recommended to break
them out into separate <code>CliSubCommand</code> fields to avoid any complications. Lastly, the derived subcommand names from
unions will be the names of the Pydantic model classes themselves.</p>
<p>When assigning aliases to <code>CliSubCommand</code> or <code>CliPositionalArg</code> fields, only a single alias can be assigned. For
non-union subcommands, aliasing will change the displayed help text and subcommand name. Conversely, for union
subcommands, aliasing will have no tangible effect from the perspective of the CLI settings source. Lastly, for
positional arguments, aliasing will change the CLI help text displayed for the field.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliPositionalArg</span><span class="p">,</span>
    <span class="n">CliSubCommand</span><span class="p">,</span>
    <span class="n">get_subcommand</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Alpha</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apha Help&quot;&quot;&quot;</span>

    <span class="n">cmd_alpha</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;alpha-cmd&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Beta</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Beta Help&quot;&quot;&quot;</span>

    <span class="n">opt_beta</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;opt-beta&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Gamma</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gamma Help&quot;&quot;&quot;</span>

    <span class="n">opt_gamma</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;opt-gamma&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Root</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">alpha_or_beta</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Alpha</span><span class="p">,</span> <span class="n">Beta</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;alpha-or-beta-cmd&#39;</span><span class="p">)</span>
    <span class="n">gamma</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Gamma</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;gamma-cmd&#39;</span><span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;Alpha&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">get_subcommand</span><span class="p">(</span><span class="n">Root</span><span class="p">())</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;cmd_alpha&#39;</span><span class="p">:</span> <span class="s1">&#39;hello&#39;</span><span class="p">}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;Beta&#39;</span><span class="p">,</span> <span class="s1">&#39;--opt-beta=hey&#39;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">get_subcommand</span><span class="p">(</span><span class="n">Root</span><span class="p">())</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;opt_beta&#39;</span><span class="p">:</span> <span class="s1">&#39;hey&#39;</span><span class="p">}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;gamma-cmd&#39;</span><span class="p">,</span> <span class="s1">&#39;--opt-gamma=hi&#39;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">get_subcommand</span><span class="p">(</span><span class="n">Root</span><span class="p">())</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;opt_gamma&#39;</span><span class="p">:</span> <span class="s1">&#39;hi&#39;</span><span class="p">}</span>
</code></pre></div>
<h3 id="creating-cli-applications">Creating CLI Applications<a class="headerlink" href="#creating-cli-applications" title="Permanent link">&para;</a></h3>
<p>The <code>CliApp</code> class provides two utility methods, <code>CliApp.run</code> and <code>CliApp.run_subcommand</code>, that can be used to run a
Pydantic <code>BaseSettings</code>, <code>BaseModel</code>, or <code>pydantic.dataclasses.dataclass</code> as a CLI application. Primarily, the methods
provide structure for running <code>cli_cmd</code> methods associated with models.</p>
<p><code>CliApp.run</code> can be used in directly providing the <code>cli_args</code> to be parsed, and will run the model <code>cli_cmd</code> method (if
defined) after instantiation:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliApp</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">this_foo</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Print the parsed data</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
        <span class="c1">#&gt; {&#39;this_foo&#39;: &#39;is such a foo&#39;}</span>

        <span class="c1"># Update the parsed data showing cli_cmd ran</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">this_foo</span> <span class="o">=</span> <span class="s1">&#39;ran the foo cli cmd&#39;</span>


<span class="n">s</span> <span class="o">=</span> <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">cli_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--this_foo&#39;</span><span class="p">,</span> <span class="s1">&#39;is such a foo&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;this_foo&#39;: &#39;ran the foo cli cmd&#39;}</span>
</code></pre></div>
<p>Similarly, the <code>CliApp.run_subcommand</code> can be used in recursive fashion to run the <code>cli_cmd</code> method of a subcommand:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">CliApp</span><span class="p">,</span> <span class="n">CliPositionalArg</span><span class="p">,</span> <span class="n">CliSubCommand</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Init</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;git init &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="c1">#&gt; git init &quot;dir&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;ran the git init cli cmd&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Clone</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">repository</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;git clone from &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repository</span><span class="si">}</span><span class="s1">&quot; into &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;ran the clone cli cmd&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Git</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">clone</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Clone</span><span class="p">]</span>
    <span class="n">init</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Init</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">CliApp</span><span class="o">.</span><span class="n">run_subcommand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">cmd</span> <span class="o">=</span> <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Git</span><span class="p">,</span> <span class="n">cli_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;init&#39;</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">cmd</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;clone&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;ran the git init cli cmd&#39;</span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike <code>CliApp.run</code>, <code>CliApp.run_subcommand</code> requires the subcommand model to have a defined <code>cli_cmd</code> method.</p>
</div>
<p>For <code>BaseModel</code> and <code>pydantic.dataclasses.dataclass</code> types, <code>CliApp.run</code> will internally use the following
<code>BaseSettings</code> configuration defaults:</p>
<ul>
<li><code>nested_model_default_partial_update=True</code></li>
<li><code>case_sensitive=True</code></li>
<li><code>cli_hide_none_type=True</code></li>
<li><code>cli_avoid_json=True</code></li>
<li><code>cli_enforce_required=True</code></li>
<li><code>cli_implicit_flags=True</code></li>
<li><code>cli_kebab_case=True</code></li>
</ul>
<h3 id="asynchronous-cli-commands">Asynchronous CLI Commands<a class="headerlink" href="#asynchronous-cli-commands" title="Permanent link">&para;</a></h3>
<p>Pydantic settings supports running asynchronous CLI commands via <code>CliApp.run</code> and <code>CliApp.run_subcommand</code>. With this feature, you can define async def methods within your Pydantic models (including subcommands) and have them executed just like their synchronous counterparts. Specifically:</p>
<ol>
<li>Asynchronous methods are supported: You can now mark your cli_cmd or similar CLI entrypoint methods as async def and have CliApp execute them.</li>
<li>Subcommands may also be asynchronous: If you have nested CLI subcommands, the final (lowest-level) subcommand methods can likewise be asynchronous.</li>
<li>Limit asynchronous methods to final subcommands: Defining parent commands as asynchronous is not recommended, because it can result in additional threads and event loops being created. For best performance and to avoid unnecessary resource usage, only implement your deepest (child) subcommands as async def.</li>
</ol>
<p>Below is a simple example demonstrating an asynchronous top-level command:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliApp</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AsyncSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello from an async CLI method!&#39;</span><span class="p">)</span>
        <span class="c1">#&gt; Hello from an async CLI method!</span>


<span class="c1"># If an event loop is already running, a new thread will be used;</span>
<span class="c1"># otherwise, asyncio.run() is used to execute this async method.</span>
<span class="k">assert</span> <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">AsyncSettings</span><span class="p">,</span> <span class="n">cli_args</span><span class="o">=</span><span class="p">[])</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{}</span>
</code></pre></div>
<h4 id="asynchronous-subcommands">Asynchronous Subcommands<a class="headerlink" href="#asynchronous-subcommands" title="Permanent link">&para;</a></h4>
<p>As mentioned above, you can also define subcommands as async. However, only do so for the leaf (lowest-level) subcommand to avoid spawning new threads and event loops unnecessarily in parent commands:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliApp</span><span class="p">,</span>
    <span class="n">CliPositionalArg</span><span class="p">,</span>
    <span class="n">CliSubCommand</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Clone</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">repository</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Perform async tasks here, e.g. network or I/O operations</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cloning async from &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repository</span><span class="si">}</span><span class="s1">&quot; into &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">directory</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="c1">#&gt; Cloning async from &quot;repo&quot; into &quot;dir&quot;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Git</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">clone</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Clone</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cli_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Run the final subcommand (clone/init). It is recommended to define async methods only at the deepest level.</span>
        <span class="n">CliApp</span><span class="o">.</span><span class="n">run_subcommand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Git</span><span class="p">,</span> <span class="n">cli_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;clone&#39;</span><span class="p">,</span> <span class="s1">&#39;repo&#39;</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;repository&#39;</span><span class="p">:</span> <span class="s1">&#39;repo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;dir&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>When executing a subcommand with an asynchronous cli_cmd, Pydantic settings automatically detects whether the current thread already has an active event loop. If so, the async command is run in a fresh thread to avoid conflicts. Otherwise, it uses asyncio.run() in the current thread. This handling ensures your asynchronous subcommands "just work" without additional manual setup.</p>
<h3 id="serializing-cli-arguments">Serializing CLI Arguments<a class="headerlink" href="#serializing-cli-arguments" title="Permanent link">&para;</a></h3>
<p>An instantiated Pydantic model can be serialized into its CLI arguments using the <code>CliApp.serialize</code> method.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">CliApp</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Nested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">that</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">this</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">Nested</span>


<span class="nb">print</span><span class="p">(</span><span class="n">CliApp</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">this</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="n">Nested</span><span class="p">(</span><span class="n">that</span><span class="o">=</span><span class="mi">123</span><span class="p">))))</span>
<span class="c1">#&gt; [&#39;--this&#39;, &#39;hello&#39;, &#39;--nested.that&#39;, &#39;123&#39;]</span>
</code></pre></div>
<h3 id="mutually-exclusive-groups">Mutually Exclusive Groups<a class="headerlink" href="#mutually-exclusive-groups" title="Permanent link">&para;</a></h3>
<p>CLI mutually exclusive groups can be created by inheriting from the <code>CliMutuallyExclusiveGroup</code> class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A <code>CliMutuallyExclusiveGroup</code> cannot be used in a union or contain nested models.</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">CliApp</span><span class="p">,</span> <span class="n">CliMutuallyExclusiveGroup</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="p">(</span><span class="n">CliMutuallyExclusiveGroup</span><span class="p">):</span>
    <span class="n">radius</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">diameter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">perimeter</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">circle</span><span class="p">:</span> <span class="n">Circle</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="n">Settings</span><span class="p">,</span>
        <span class="n">cli_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--circle.radius=1&#39;</span><span class="p">,</span> <span class="s1">&#39;--circle.diameter=2&#39;</span><span class="p">],</span>
        <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    error parsing CLI: argument --circle.diameter: not allowed with argument --circle.radius</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="customizing-the-cli-experience">Customizing the CLI Experience<a class="headerlink" href="#customizing-the-cli-experience" title="Permanent link">&para;</a></h3>
<p>The below flags can be used to customise the CLI experience to your needs.</p>
<h4 id="change-the-displayed-program-name">Change the Displayed Program Name<a class="headerlink" href="#change-the-displayed-program-name" title="Permanent link">&para;</a></h4>
<p>Change the default program name displayed in the help text usage by setting <code>cli_prog_name</code>. By default, it will derive
the name of the currently executing program from <code>sys.argv[0]</code>, just like argparse.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_prog_name</span><span class="o">=</span><span class="s1">&#39;appdantic&#39;</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: appdantic [-h]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="cli-boolean-flags">CLI Boolean Flags<a class="headerlink" href="#cli-boolean-flags" title="Permanent link">&para;</a></h4>
<p>Change whether boolean fields should be explicit or implicit by default using the <code>cli_implicit_flags</code> setting. By
default, boolean fields are "explicit", meaning a boolean value must be explicitly provided on the CLI, e.g.
<code>--flag=True</code>. Conversely, boolean fields that are "implicit" derive the value from the flag itself, e.g.
<code>--flag,--no-flag</code>, which removes the need for an explicit value to be passed.</p>
<p>Additionally, the provided <code>CliImplicitFlag</code> and <code>CliExplicitFlag</code> annotations can be used for more granular control
when necessary.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliExplicitFlag</span><span class="p">,</span> <span class="n">CliImplicitFlag</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ExplicitSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Boolean fields are explicit by default.&quot;&quot;&quot;</span>

    <span class="n">explicit_req</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --explicit_req bool   (required)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">explicit_opt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --explicit_opt bool   (default: False)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Booleans are explicit by default, so must override implicit flags with annotation</span>
    <span class="n">implicit_req</span><span class="p">:</span> <span class="n">CliImplicitFlag</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --implicit_req, --no-implicit_req (required)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">implicit_opt</span><span class="p">:</span> <span class="n">CliImplicitFlag</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --implicit_opt, --no-implicit_opt (default: False)</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ImplicitSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_implicit_flags</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;With cli_implicit_flags=True, boolean fields are implicit by default.&quot;&quot;&quot;</span>

    <span class="c1"># Booleans are implicit by default, so must override explicit flags with annotation</span>
    <span class="n">explicit_req</span><span class="p">:</span> <span class="n">CliExplicitFlag</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --explicit_req bool   (required)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">explicit_opt</span><span class="p">:</span> <span class="n">CliExplicitFlag</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --explicit_opt bool   (default: False)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">implicit_req</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --implicit_req, --no-implicit_req (required)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">implicit_opt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    --implicit_opt, --no-implicit_opt (default: False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="ignore-and-retrieve-unknown-arguments">Ignore and Retrieve Unknown Arguments<a class="headerlink" href="#ignore-and-retrieve-unknown-arguments" title="Permanent link">&para;</a></h4>
<p>Change whether to ignore unknown CLI arguments and only parse known ones using <code>cli_ignore_unknown_args</code>. By default, the CLI
does not ignore any args. Ignored arguments can then be retrieved using the <code>CliUnknownArgs</code> annotation.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliUnknownArgs</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_ignore_unknown_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">good_arg</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">ignored_args</span><span class="p">:</span> <span class="n">CliUnknownArgs</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--bad-arg=bad&#39;</span><span class="p">,</span> <span class="s1">&#39;ANOTHER_BAD_ARG&#39;</span><span class="p">,</span> <span class="s1">&#39;--good_arg=hello world&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;good_arg&#39;: &#39;hello world&#39;, &#39;ignored_args&#39;: [&#39;--bad-arg=bad&#39;, &#39;ANOTHER_BAD_ARG&#39;]}</span>
</code></pre></div>
<h4 id="cli-kebab-case-for-arguments">CLI Kebab Case for Arguments<a class="headerlink" href="#cli-kebab-case-for-arguments" title="Permanent link">&para;</a></h4>
<p>Change whether CLI arguments should use kebab case by enabling <code>cli_kebab_case</code>. By default, <code>cli_kebab_case=True</code> will
ignore enum fields, and is equivalent to <code>cli_kebab_case='no_enums'</code>. To apply kebab case to everything, including
enums, use <code>cli_kebab_case='all'</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_kebab_case</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_option</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;will show as kebab case on CLI&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--my-option str]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help       show this help message and exit</span>
<span class="sd">  --my-option str  will show as kebab case on CLI (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="change-whether-cli-should-exit-on-error">Change Whether CLI Should Exit on Error<a class="headerlink" href="#change-whether-cli-should-exit-on-error" title="Permanent link">&para;</a></h4>
<p>Change whether the CLI internal parser will exit on error or raise a <code>SettingsError</code> exception by using
<code>cli_exit_on_error</code>. By default, the CLI internal parser will exit on error.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> <span class="o">...</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--bad-arg&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: unrecognized arguments: --bad-arg</span>
</code></pre></div>
<h4 id="enforce-required-arguments-at-cli">Enforce Required Arguments at CLI<a class="headerlink" href="#enforce-required-arguments-at-cli" title="Permanent link">&para;</a></h4>
<p>Pydantic settings is designed to pull values in from various sources when instantating a model. This means a field that
is required is not strictly required from any single source (e.g. the CLI). Instead, all that matters is that one of the
sources provides the required value.</p>
<p>However, if your use case <a href="#command-line-support">aligns more with #2</a>, using Pydantic models to define CLIs, you will
likely want required fields to be <em>strictly required at the CLI</em>. We can enable this behavior by using
<code>cli_enforce_required</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A required <code>CliPositionalArg</code> field is always strictly required (enforced) at the CLI.</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_enforce_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">my_required_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;a top level required field&#39;</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_REQUIRED_FIELD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hello from environment&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: the following arguments are required: --my_required_field</span>
</code></pre></div>
<h4 id="change-the-none-type-parse-string">Change the None Type Parse String<a class="headerlink" href="#change-the-none-type-parse-string" title="Permanent link">&para;</a></h4>
<p>Change the CLI string value that will be parsed (e.g. "null", "void", "None", etc.) into <code>None</code> by setting
<code>cli_parse_none_str</code>. By default it will use the <code>env_parse_none_str</code> value if set. Otherwise, it will default to "null"
if <code>cli_avoid_json</code> is <code>False</code>, and "None" if <code>cli_avoid_json</code> is <code>True</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_parse_none_str</span><span class="o">=</span><span class="s1">&#39;void&#39;</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--v1&#39;</span><span class="p">,</span> <span class="s1">&#39;void&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;v1&#39;: None}</span>
</code></pre></div>
<h4 id="hide-none-type-values">Hide None Type Values<a class="headerlink" href="#hide-none-type-values" title="Permanent link">&para;</a></h4>
<p>Hide <code>None</code> values from the CLI help text by enabling <code>cli_hide_none_type</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_hide_none_type</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">v0</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--v0 str]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">  --v0 str    the top level v0 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="avoid-adding-json-cli-options">Avoid Adding JSON CLI Options<a class="headerlink" href="#avoid-adding-json-cli-options" title="Permanent link">&para;</a></h4>
<p>Avoid adding complex fields that result in JSON strings at the CLI by enabling <code>cli_avoid_json</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_avoid_json</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help summary for SubModel related options&#39;</span>
    <span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model.v1 int]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help summary for SubModel related options</span>

<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="use-class-docstring-for-group-help-text">Use Class Docstring for Group Help Text<a class="headerlink" href="#use-class-docstring-for-group-help-text" title="Permanent link">&para;</a></h4>
<p>By default, when populating the group help text for nested models it will pull from the field descriptions.
Alternatively, we can also configure CLI settings to pull from the class docstring instead.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the field is a union of nested models the group help text will always be pulled from the field description;
even if <code>cli_use_class_docs_for_groups</code> is set to <code>True</code>.</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The help text from the class docstring.&quot;&quot;&quot;</span>

    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_use_class_docs_for_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;My application help text.&quot;&quot;&quot;</span>

    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help text from the field description&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model JSON] [--sub_model.v1 int]</span>

<span class="sd">My application help text.</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help text from the class docstring.</span>

<span class="sd">  --sub_model JSON    set sub_model from JSON string</span>
<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="change-the-cli-flag-prefix-character">Change the CLI Flag Prefix Character<a class="headerlink" href="#change-the-cli-flag-prefix-character" title="Permanent link">&para;</a></h4>
<p>Change The CLI flag prefix character used in CLI optional arguments by settings <code>cli_flag_prefix_char</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_flag_prefix_char</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">):</span>
    <span class="n">my_arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;my-arg&#39;</span><span class="p">))</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;++my-arg&#39;</span><span class="p">,</span> <span class="s1">&#39;hi&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_arg&#39;: &#39;hi&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;+m&#39;</span><span class="p">,</span> <span class="s1">&#39;hi&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_arg&#39;: &#39;hi&#39;}</span>
</code></pre></div>
<h4 id="suppressing-fields-from-cli-help-text">Suppressing Fields from CLI Help Text<a class="headerlink" href="#suppressing-fields-from-cli-help-text" title="Permanent link">&para;</a></h4>
<p>To suppress a field from the CLI help text, the <code>CliSuppress</code> annotation can be used for field types, or the
<code>CLI_SUPPRESS</code> string constant can be used for field descriptions.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">CLI_SUPPRESS</span><span class="p">,</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliSuppress</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Suppress fields from CLI help text.&quot;&quot;&quot;</span>

    <span class="n">field_a</span><span class="p">:</span> <span class="n">CliSuppress</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">field_b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">CLI_SUPPRESS</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h]</span>

<span class="sd">Suppress fields from CLI help text.</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="cli-shortcuts-for-arguments">CLI Shortcuts for Arguments<a class="headerlink" href="#cli-shortcuts-for-arguments" title="Permanent link">&para;</a></h4>
<p>Add alternative CLI argument names (shortcuts) for fields using the <code>cli_shortcuts</code> option in <code>SettingsConfigDict</code>. This allows you to define additional names for CLI arguments, which can be especially useful for providing more user-friendly or shorter aliases for deeply nested or verbose field names.</p>
<p>The <code>cli_shortcuts</code> option takes a dictionary mapping the target field name (using dot notation for nested fields) to one or more shortcut names. If multiple fields share the same shortcut, the first matching field will take precedence.</p>
<p><strong>Flat Example:</strong></p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">option</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
    <span class="n">list_option</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;fizz&#39;</span><span class="p">)</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">cli_shortcuts</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;option&#39;</span><span class="p">:</span> <span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="s1">&#39;list_option&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;list_option2&#39;</span><span class="p">]}</span>
    <span class="p">)</span>


<span class="c1"># Now you can use the shortcuts on the CLI:</span>
<span class="c1"># --option2 sets &#39;option&#39;, --list_option2 sets &#39;list_option&#39;</span>
</code></pre></div>
<p><strong>Nested Example:</strong></p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TwiceNested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">option</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Nested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">twice_nested_option</span><span class="p">:</span> <span class="n">TwiceNested</span> <span class="o">=</span> <span class="n">TwiceNested</span><span class="p">()</span>
    <span class="n">option</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">Nested</span> <span class="o">=</span> <span class="n">Nested</span><span class="p">()</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">cli_shortcuts</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;nested.option&#39;</span><span class="p">:</span> <span class="s1">&#39;option2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nested.twice_nested_option.option&#39;</span><span class="p">:</span> <span class="s1">&#39;twice_nested_option&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>


<span class="c1"># Now you can use --option2 to set nested.option and --twice_nested_option to set nested.twice_nested_option.option</span>
</code></pre></div>
<p>If a shortcut collides (is mapped to multiple fields), it will apply to the first matching field in the model.</p>
<h3 id="integrating-with-existing-parsers">Integrating with Existing Parsers<a class="headerlink" href="#integrating-with-existing-parsers" title="Permanent link">&para;</a></h3>
<p>A CLI settings source can be integrated with existing parsers by overriding the default CLI settings source with a user
defined one that specifies the <code>root_parser</code> object.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">argparse</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliApp</span><span class="p">,</span> <span class="n">CliSettingsSource</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pear&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">])</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Bob&#39;</span>


<span class="c1"># Set existing `parser` as the `root_parser` object for the user defined settings source</span>
<span class="n">cli_settings</span> <span class="o">=</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">root_parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>

<span class="c1"># Parse and load CLI settings from the command line into the settings source.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;waldo&#39;</span><span class="p">]</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;waldo&#39;}</span>

<span class="c1"># Load CLI settings from pre-parsed arguments. i.e., the parsing occurs elsewhere and we</span>
<span class="c1"># just need to load the pre-parsed args into the settings source.</span>
<span class="n">parsed_args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;ralph&#39;</span><span class="p">])</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">CliApp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">cli_args</span><span class="o">=</span><span class="n">parsed_args</span><span class="p">,</span> <span class="n">cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;ralph&#39;}</span>
</code></pre></div>
<p>A <code>CliSettingsSource</code> connects with a <code>root_parser</code> object by using parser methods to add <code>settings_cls</code> fields as
command line arguments. The <code>CliSettingsSource</code> internal parser representation is based on the <code>argparse</code> library, and
therefore, requires parser methods that support the same attributes as their <code>argparse</code> counterparts. The available
parser methods that can be customised, along with their argparse counterparts (the defaults), are listed below:</p>
<ul>
<li><code>parse_args_method</code> - (<code>argparse.ArgumentParser.parse_args</code>)</li>
<li><code>add_argument_method</code> - (<code>argparse.ArgumentParser.add_argument</code>)</li>
<li><code>add_argument_group_method</code> - (<code>argparse.ArgumentParser.add_argument_group</code>)</li>
<li><code>add_parser_method</code> - (<code>argparse._SubParsersAction.add_parser</code>)</li>
<li><code>add_subparsers_method</code> - (<code>argparse.ArgumentParser.add_subparsers</code>)</li>
<li><code>formatter_class</code> - (<code>argparse.RawDescriptionHelpFormatter</code>)</li>
</ul>
<p>For a non-argparse parser the parser methods can be set to <code>None</code> if not supported. The CLI settings will only raise an
error when connecting to the root parser if a parser method is necessary but set to <code>None</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>formatter_class</code> is only applied to subcommands. The <code>CliSettingsSource</code> never touches or modifies any of the
external parser settings to avoid breaking changes. Since subcommands reside on their own internal parser trees, we
can safely apply the <code>formatter_class</code> settings without breaking the external parser logic.</p>
</div>
<h2 id="secrets">Secrets<a class="headerlink" href="#secrets" title="Permanent link">&para;</a></h2>
<p>Placing secret values in files is a common pattern to provide sensitive configuration to an application.</p>
<p>A secret file follows the same principal as a dotenv file except it only contains a single value and the file name
is used as the key. A secret file will look like the following:</p>
<div class="language-text highlight"><span class="filename">/var/run/database_password</span><pre><span></span><code>super_secret_database_password
</code></pre></div>
<p>Once you have your secret files, <em>pydantic</em> supports loading it in two ways:</p>
<ol>
<li>Setting the <code>secrets_dir</code> on <code>model_config</code> in a <code>BaseSettings</code> class to the directory where your secret files are stored.
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/var/run&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">database_password</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div></li>
<li>Instantiating the <code>BaseSettings</code> derived class with the <code>_secrets_dir</code> keyword argument:
   <div class="language-text highlight"><pre><span></span><code>settings = Settings(_secrets_dir=&#39;/var/run&#39;)
</code></pre></div></li>
</ol>
<p>In either case, the value of the passed argument can be any valid directory, either absolute or relative to the
current working directory. <strong>Note that a non existent directory will only generate a warning</strong>.
From there, <em>pydantic</em> will handle everything for you by loading in your variables and validating them.</p>
<p>Even when using a secrets directory, <em>pydantic</em> will still read environment variables from a dotenv file or the environment,
<strong>a dotenv file and environment variables will always take priority over values loaded from the secrets directory</strong>.</p>
<p>Passing a file path via the <code>_secrets_dir</code> keyword argument on instantiation (method 2) will override
the value (if any) set on the <code>model_config</code> class.</p>
<p>If you need to load settings from multiple secrets directories, you can pass multiple paths as a tuple or list. Just like for <code>env_file</code>, values from subsequent paths override previous ones.</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="c1"># files in &#39;/run/secrets&#39; take priority over &#39;/var/run&#39;</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;/var/run&#39;</span><span class="p">,</span> <span class="s1">&#39;/run/secrets&#39;</span><span class="p">))</span>

    <span class="n">database_password</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>
<p>If any of <code>secrets_dir</code> is missing, it is ignored, and warning is shown. If any of <code>secrets_dir</code> is a file, error is raised.</p>
<h3 id="use-case-docker-secrets">Use Case: Docker Secrets<a class="headerlink" href="#use-case-docker-secrets" title="Permanent link">&para;</a></h3>
<p>Docker Secrets can be used to provide sensitive configuration to an application running in a Docker container.
To use these secrets in a <em>pydantic</em> application the process is simple. More information regarding creating, managing
and using secrets in Docker see the official
<a href="https://docs.docker.com/engine/reference/commandline/secret/">Docker documentation</a>.</p>
<p>First, define your <code>Settings</code> class with a <code>SettingsConfigDict</code> that specifies the secrets directory.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/run/secrets&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">my_secret_data</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default <a href="https://docs.docker.com/engine/swarm/secrets/#how-docker-manages-secrets">Docker uses <code>/run/secrets</code></a>
as the target mount point. If you want to use a different location, change <code>Config.secrets_dir</code> accordingly.</p>
</div>
<p>Then, create your secret via the Docker CLI
<div class="language-bash highlight"><pre><span></span><code><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;This is a secret&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>secret<span class="w"> </span>create<span class="w"> </span>my_secret_data<span class="w"> </span>-
</code></pre></div></p>
<p>Last, run your application inside a Docker container and supply your newly created secret
<div class="language-bash highlight"><pre><span></span><code>docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>pydantic-with-secrets<span class="w"> </span>--secret<span class="w"> </span>my_secret_data<span class="w"> </span>pydantic-app:latest
</code></pre></div></p>
<h2 id="nested-secrets">Nested Secrets<a class="headerlink" href="#nested-secrets" title="Permanent link">&para;</a></h2>
<p>The default secrets implementation, <code>SecretsSettingsSource</code>, has behaviour that is not always desired or sufficient.
For example, the default implementation does not support secret fields in nested submodels.</p>
<p><code>NestedSecretsSettingsSource</code> can be used as a drop-in replacement to <code>SecretsSettingsSource</code> to adjust the default behaviour.
All differences are summarized in the table below.</p>
<table>
<thead>
<tr>
<th><code>SecretsSettingsSource</code></th>
<th><code>NestedSecretsSettingsSourcee</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Secret fields must belong to a top level model.</td>
<td>Secrets can be fields of nested models.</td>
</tr>
<tr>
<td>Secret files can be placed in <code>secrets_dir</code>s only.</td>
<td>Secret files can be placed in subdirectories for nested models.</td>
</tr>
<tr>
<td>Secret files discovery is based on the same configuration options that are used by <code>EnvSettingsSource</code>: <code>case_sensitive</code>, <code>env_nested_delimiter</code>, <code>env_prefix</code>.</td>
<td>Default options are respected, but can be overridden with <code>secrets_case_sensitive</code>, <code>secrets_nested_delimiter</code>, <code>secrets_prefix</code>.</td>
</tr>
<tr>
<td>When <code>secrets_dir</code> is missing on the file system, a warning is generated.</td>
<td>Use <code>secrets_dir_missing</code> options to choose whether to issue warning, raise error, or silently ignore.</td>
</tr>
</tbody>
</table>
<h3 id="use-case-plain-directory-layout">Use Case: Plain Directory Layout<a class="headerlink" href="#use-case-plain-directory-layout" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code>ðŸ“‚ secrets
â”œâ”€â”€ ðŸ“„ app_key
â””â”€â”€ ðŸ“„ db_passwd
</code></pre></div>
<p>In the example below, secrets nested delimiter <code>'_'</code> is different from env nested delimiter <code>'__'</code>.
Value for <code>Settings.db.user</code> can be passed in env variable <code>MY_DB__USER</code>.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SecretStr</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">NestedSecretsSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AppSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">key</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DbSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">passwd</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">DbSettings</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;MY_&#39;</span><span class="p">,</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">,</span>
        <span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;secrets&#39;</span><span class="p">,</span>
        <span class="n">secrets_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">,</span>
        <span class="n">init_settings</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">NestedSecretsSettingsSource</span><span class="p">(</span><span class="n">file_secret_settings</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
<h3 id="use-case-nested-directory-layout">Use Case: Nested Directory Layout<a class="headerlink" href="#use-case-nested-directory-layout" title="Permanent link">&para;</a></h3>
<p><div class="language-text highlight"><pre><span></span><code>ðŸ“‚ secrets
â”œâ”€â”€ ðŸ“‚ app
â”‚   â””â”€â”€ ðŸ“„ key
â””â”€â”€ ðŸ“‚ db
    â””â”€â”€ ðŸ“„ passwd
</code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SecretStr</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">NestedSecretsSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AppSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">key</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DbSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">passwd</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">DbSettings</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;MY_&#39;</span><span class="p">,</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">,</span>
        <span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;secrets&#39;</span><span class="p">,</span>
        <span class="n">secrets_nested_subdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">,</span>
        <span class="n">init_settings</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">NestedSecretsSettingsSource</span><span class="p">(</span><span class="n">file_secret_settings</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></p>
<h3 id="use-case-multiple-nested-directories">Use Case: Multiple Nested Directories<a class="headerlink" href="#use-case-multiple-nested-directories" title="Permanent link">&para;</a></h3>
<p><div class="language-text highlight"><pre><span></span><code>ðŸ“‚ secrets
â”œâ”€â”€ ðŸ“‚ default
â”‚   â”œâ”€â”€ ðŸ“‚ app
â”‚   â”‚   â””â”€â”€ ðŸ“„ key
â”‚   â””â”€â”€ ðŸ“‚ db
â”‚       â””â”€â”€ ðŸ“„ passwd
â””â”€â”€ ðŸ“‚ override
    â”œâ”€â”€ ðŸ“‚ app
    â”‚   â””â”€â”€ ðŸ“„ key
    â””â”€â”€ ðŸ“‚ db
        â””â”€â”€ ðŸ“„ passwd
</code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SecretStr</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">NestedSecretsSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AppSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">key</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DbSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">passwd</span><span class="p">:</span> <span class="n">SecretStr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">DbSettings</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;MY_&#39;</span><span class="p">,</span>
        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">,</span>
        <span class="n">secrets_dir</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;secrets/default&#39;</span><span class="p">,</span> <span class="s1">&#39;secrets/override&#39;</span><span class="p">],</span>
        <span class="n">secrets_nested_subdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">,</span>
        <span class="n">init_settings</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">NestedSecretsSettingsSource</span><span class="p">(</span><span class="n">file_secret_settings</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></p>
<h3 id="configuration-options">Configuration Options<a class="headerlink" href="#configuration-options" title="Permanent link">&para;</a></h3>
<h4 id="secrets_dir">secrets_dir<a class="headerlink" href="#secrets_dir" title="Permanent link">&para;</a></h4>
<p>Path to secrets directory, same as <code>SecretsSettingsSource.secrets_dir</code>. If <code>list</code>, the last match wins.
If <code>secrets_dir</code> is passed in both source constructor and model config, values are not merged (constructor wins).</p>
<h4 id="secrets_dir_missing">secrets_dir_missing<a class="headerlink" href="#secrets_dir_missing" title="Permanent link">&para;</a></h4>
<p>If <code>secrets_dir</code> does not exist, original <code>SecretsSettingsSource</code> issues a warning.
However, this may be undesirable, for example if we don't mount Docker Secrets in e.g. dev environment.
Use <code>secrets_dir_missing</code> to choose:</p>
<ul>
<li><code>'ok'</code> â€” do nothing if <code>secrets_dir</code> does not exist</li>
<li><code>'warn'</code> (default) â€” print warning, same as <code>SecretsSettingsSource</code></li>
<li><code>'error'</code> â€” raise <code>SettingsError</code></li>
</ul>
<p>If multiple <code>secrets_dir</code> passed, the same <code>secrets_dir_missing</code> action applies to each of them.</p>
<h4 id="secrets_dir_max_size">secrets_dir_max_size<a class="headerlink" href="#secrets_dir_max_size" title="Permanent link">&para;</a></h4>
<p>Limit the size of <code>secrets_dir</code> for security reasons, defaults to <code>SECRETS_DIR_MAX_SIZE</code> equal to 16 MiB.</p>
<p><code>NestedSecretsSettingsSource</code> is a thin wrapper around <code>EnvSettingsSource</code>,
which loads all potential secrets on initialization. This could lead to <code>MemoryError</code> if we mount
a large file under <code>secrets_dir</code>.</p>
<p>If multiple <code>secrets_dir</code> passed, the limit applies to each directory independently.</p>
<h4 id="secrets_case_sensitive">secrets_case_sensitive<a class="headerlink" href="#secrets_case_sensitive" title="Permanent link">&para;</a></h4>
<p>Same as <code>case_sensitive</code>, but works for secrets only. If not specified, defaults to <code>case_sensitive</code>.</p>
<h4 id="secrets_nested_delimiter">secrets_nested_delimiter<a class="headerlink" href="#secrets_nested_delimiter" title="Permanent link">&para;</a></h4>
<p>Same as <code>env_nested_delimiter</code>, but works for secrets only. If not specified, defaults to <code>env_nested_delimiter</code>.
This option is used to implement <em>nested secrets directory</em> layout and allows to do even nasty things
like <code>/run/secrets/model/delim/nested1/delim/nested2</code>.</p>
<h4 id="secrets_nested_subdir">secrets_nested_subdir<a class="headerlink" href="#secrets_nested_subdir" title="Permanent link">&para;</a></h4>
<p>Boolean flag to turn on <em>nested secrets directory</em> mode, <code>False</code> by default. If <code>True</code>, sets <code>secrets_nested_delimiter</code>
to <code>os.sep</code>. Raises <code>SettingsError</code> if <code>secrets_nested_delimiter</code> is already specified.</p>
<h4 id="secrets_prefix">secrets_prefix<a class="headerlink" href="#secrets_prefix" title="Permanent link">&para;</a></h4>
<p>Secret path prefix, similar to <code>env_prefix</code>, but works for secrets only. Defaults to <code>env_prefix</code>
if not specified. Works in both plain and nested directory modes, like
<code>'/run/secrets/prefix_model__nested'</code> and <code>'/run/secrets/prefix_model/nested'</code>.</p>
<h2 id="aws-secrets-manager">AWS Secrets Manager<a class="headerlink" href="#aws-secrets-manager" title="Permanent link">&para;</a></h2>
<p>You must set one parameter:</p>
<ul>
<li><code>secret_id</code>: The AWS secret id</li>
</ul>
<p>You must have the same naming convention in the key value in secret as in the field name. For example, if the key in secret is named <code>SqlServerPassword</code>, the field name must be the same. You can use an alias too.</p>
<p>In AWS Secrets Manager, nested models are supported with the <code>--</code> separator in the key name. For example, <code>SqlServer--Password</code>.</p>
<p>Arrays (e.g. <code>MySecret--0</code>, <code>MySecret--1</code>) are not supported.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AWSSecretsManagerSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AWSSecretsManagerSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">sub</span><span class="p">:</span> <span class="n">SubModel</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">aws_secrets_manager_settings</span> <span class="o">=</span> <span class="n">AWSSecretsManagerSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AWS_SECRETS_MANAGER_SECRET_ID&#39;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="n">aws_secrets_manager_settings</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
<h2 id="azure-key-vault">Azure Key Vault<a class="headerlink" href="#azure-key-vault" title="Permanent link">&para;</a></h2>
<p>You must set two parameters:</p>
<ul>
<li><code>url</code>: For example, <code>https://my-resource.vault.azure.net/</code>.</li>
<li><code>credential</code>: If you use <code>DefaultAzureCredential</code>, in local you can execute <code>az login</code> to get your identity credentials. The identity must have a role assignment (the recommended one is <code>Key Vault Secrets User</code>), so you can access the secrets.</li>
</ul>
<p>You must have the same naming convention in the field name as in the Key Vault secret name. For example, if the secret is named <code>SqlServerPassword</code>, the field name must be the same. You can use an alias too.</p>
<p>In Key Vault, nested models are supported with the <code>--</code> separator. For example, <code>SqlServer--Password</code>.</p>
<p>Key Vault arrays (e.g. <code>MySecret--0</code>, <code>MySecret--1</code>) are not supported.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AzureKeyVaultSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AzureKeyVaultSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">sub</span><span class="p">:</span> <span class="n">SubModel</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">az_key_vault_settings</span> <span class="o">=</span> <span class="n">AzureKeyVaultSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AZURE_KEY_VAULT_URL&#39;</span><span class="p">],</span>
            <span class="n">DefaultAzureCredential</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="n">az_key_vault_settings</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
<h3 id="snake-case-conversion">Snake case conversion<a class="headerlink" href="#snake-case-conversion" title="Permanent link">&para;</a></h3>
<p>The Azure Key Vault source accepts a <code>snake_case_convertion</code> option, disabled by default, to convert Key Vault secret names by mapping them to Python's snake_case field names, without the need to use aliases.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultAzureCredential</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AzureKeyVaultSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AzureKeyVaultSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_setting</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">az_key_vault_settings</span> <span class="o">=</span> <span class="n">AzureKeyVaultSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AZURE_KEY_VAULT_URL&#39;</span><span class="p">],</span>
            <span class="n">DefaultAzureCredential</span><span class="p">(),</span>
            <span class="n">snake_case_conversion</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">az_key_vault_settings</span><span class="p">,)</span>
</code></pre></div>
<p>This setup will load Azure Key Vault secrets (e.g., <code>MySetting</code>, <code>mySetting</code>, <code>my-secret</code> or <code>MY-SECRET</code>), mapping them to the snake case version (<code>my_setting</code> in this case).</p>
<h3 id="dash-to-underscore-mapping">Dash to underscore mapping<a class="headerlink" href="#dash-to-underscore-mapping" title="Permanent link">&para;</a></h3>
<p>The Azure Key Vault source accepts a <code>dash_to_underscore</code> option, disabled by default, to support Key Vault kebab-case secret names by mapping them to Python's snake_case field names. When enabled, dashes (<code>-</code>) in secret names are mapped to underscores (<code>_</code>) in field names during validation.</p>
<p>This mapping applies only to <em>field names</em>, not to aliases.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">azure.identity</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">AzureKeyVaultSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AzureKeyVaultSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">field_with_underscore</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">field_with_alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;Alias-With-Dashes&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">az_key_vault_settings</span> <span class="o">=</span> <span class="n">AzureKeyVaultSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AZURE_KEY_VAULT_URL&#39;</span><span class="p">],</span>
            <span class="n">DefaultAzureCredential</span><span class="p">(),</span>
            <span class="n">dash_to_underscore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">az_key_vault_settings</span><span class="p">,)</span>
</code></pre></div>
<p>This setup will load Azure Key Vault secrets named <code>field-with-underscore</code> and <code>Alias-With-Dashes</code>, mapping them to the <code>field_with_underscore</code> and <code>field_with_alias</code> fields, respectively.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Alternatively, you can configure an <a href="../alias/#using-alias-generators">alias_generator</a> to map PascalCase secrets.</p>
</div>
<h2 id="google-cloud-secret-manager">Google Cloud Secret Manager<a class="headerlink" href="#google-cloud-secret-manager" title="Permanent link">&para;</a></h2>
<p>Google Cloud Secret Manager allows you to store, manage, and access sensitive information as secrets in Google Cloud Platform. This integration lets you retrieve secrets directly from GCP Secret Manager for use in your Pydantic settings.</p>
<h3 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">&para;</a></h3>
<p>The Google Cloud Secret Manager integration requires additional dependencies:</p>
<div class="language-bash highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;pydantic-settings[gcp-secret-manager]&quot;</span>
</code></pre></div>
<h3 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h3>
<p>To use Google Cloud Secret Manager, you need to:</p>
<ol>
<li>Create a <code>GoogleSecretManagerSettingsSource</code>. (See <a href="#gcp-authentication">GCP Authentication</a> for authentication options.)</li>
<li>Add this source to your settings customization pipeline</li>
</ol>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">GoogleSecretManagerSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Database</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database</span><span class="p">:</span> <span class="n">Database</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="c1"># Create the GCP Secret Manager settings source</span>
        <span class="n">gcp_settings</span> <span class="o">=</span> <span class="n">GoogleSecretManagerSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="c1"># If not provided, will use google.auth.default()</span>
            <span class="c1"># to get credentials from the environemnt</span>
            <span class="c1"># credentials=your_credentials,</span>
            <span class="c1"># If not provided, will use google.auth.default()</span>
            <span class="c1"># to get project_id from the environemnt</span>
            <span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;your-gcp-project-id&#39;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="n">gcp_settings</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
<h3 id="gcp-authentication">GCP Authentication<a class="headerlink" href="#gcp-authentication" title="Permanent link">&para;</a></h3>
<p>The <code>GoogleSecretManagerSettingsSource</code> supports several authentication methods:</p>
<ol>
<li>
<p><strong>Default credentials</strong> - If you don't provide credentials or project ID, it will use <a href="https://google-auth.readthedocs.io/en/master/reference/google.auth.html#google.auth.default"><code>google.auth.default()</code></a> to obtain them. This works with:</p>
</li>
<li>
<p>Service account credentials from <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment variable</p>
</li>
<li>User credentials from <code>gcloud auth application-default login</code></li>
<li>
<p>Compute Engine, GKE, Cloud Run, or Cloud Functions default service accounts</p>
</li>
<li>
<p><strong>Explicit credentials</strong> - You can also provide <code>credentials</code> directly. e.g. <code>sa_credentials = google.oauth2.service_account.Credentials.from_service_account_file('path/to/service-account.json')</code> and then <code>GoogleSecretManagerSettingsSource(credentials=sa_credentials)</code></p>
</li>
</ol>
<h3 id="nested-models">Nested Models<a class="headerlink" href="#nested-models" title="Permanent link">&para;</a></h3>
<p>For nested models, Secret Manager supports the <code>env_nested_delimiter</code> setting as long as it complies with the <a href="https://cloud.google.com/secret-manager/docs/creating-and-accessing-secrets#create-a-secret">naming rules</a>. In the example above, you would create secrets named <code>database__password</code> and <code>database__user</code> in Secret Manager.</p>
<h3 id="important-notes">Important Notes<a class="headerlink" href="#important-notes" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Case Sensitivity</strong>: By default, secret names are case-sensitive.</li>
<li><strong>Secret Naming</strong>: Create secrets in Google Secret Manager with names that match your field names (including any prefix). According the <a href="https://cloud.google.com/secret-manager/docs/creating-and-accessing-secrets#create-a-secret">Secret Manager documentation</a>, a secret name can contain uppercase and lowercase letters, numerals, hyphens, and underscores. The maximum allowed length for a name is 255 characters.</li>
<li><strong>Secret Versions</strong>: The GoogleSecretManagerSettingsSource uses the "latest" version of secrets.</li>
</ol>
<p>For more details on creating and managing secrets in Google Cloud Secret Manager, see the <a href="https://cloud.google.com/secret-manager/docs">official Google Cloud documentation</a>.</p>
<h2 id="other-settings-source">Other settings source<a class="headerlink" href="#other-settings-source" title="Permanent link">&para;</a></h2>
<p>Other settings sources are available for common configuration files:</p>
<ul>
<li><code>JsonConfigSettingsSource</code> using <code>json_file</code> and <code>json_file_encoding</code> arguments</li>
<li><code>PyprojectTomlConfigSettingsSource</code> using <em>(optional)</em> <code>pyproject_toml_depth</code> and <em>(optional)</em> <code>pyproject_toml_table_header</code> arguments</li>
<li><code>TomlConfigSettingsSource</code> using <code>toml_file</code> argument</li>
<li><code>YamlConfigSettingsSource</code> using <code>yaml_file</code> and yaml_file_encoding arguments</li>
</ul>
<p>You can also provide multiple files by providing a list of path:
<div class="language-py highlight"><pre><span></span><code><span class="n">toml_file</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;config.default.toml&#39;</span><span class="p">,</span> <span class="s1">&#39;config.custom.toml&#39;</span><span class="p">]</span>
</code></pre></div>
To use them, you can use the same mechanism described <a href="#customise-settings-sources">here</a></p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
    <span class="n">TomlConfigSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Nested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">nested_field</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">Nested</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">toml_file</span><span class="o">=</span><span class="s1">&#39;config.toml&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">TomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>
</code></pre></div>
<p>This will be able to read the following "config.toml" file, located in your working directory:</p>
<div class="language-toml highlight"><pre><span></span><code><span class="n">foobar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span>
<span class="k">[nested]</span>
<span class="n">nested_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;world!&quot;</span>
</code></pre></div>
<h3 id="pyprojecttoml">pyproject.toml<a class="headerlink" href="#pyprojecttoml" title="Permanent link">&para;</a></h3>
<p>"pyproject.toml" is a standardized file for providing configuration values in Python projects.
<a href="https://peps.python.org/pep-0518/#tool-table">PEP 518</a> defines a <code>[tool]</code> table that can be used to provide arbitrary tool configuration.
While encouraged to use the <code>[tool]</code> table, <code>PyprojectTomlConfigSettingsSource</code> can be used to load variables from any location with in "pyproject.toml" file.</p>
<p>This is controlled by providing <code>SettingsConfigDict(pyproject_toml_table_header=tuple[str, ...])</code> where the value is a tuple of header parts.
By default, <code>pyproject_toml_table_header=('tool', 'pydantic-settings')</code> which will load variables from the <code>[tool.pydantic-settings]</code> table.</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the table used by default.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SomeTableSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from a user defined table.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;tool&#39;</span><span class="p">,</span> <span class="s1">&#39;some-table&#39;</span><span class="p">)</span>
    <span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">RootSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the root of a pyproject.toml file.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">())</span>
</code></pre></div>
<p>This will be able to read the following "pyproject.toml" file, located in your working directory, resulting in <code>Settings(field='default-table')</code>, <code>SomeTableSettings(field='some-table')</code>, &amp; <code>RootSettings(field='root')</code>:</p>
<div class="language-toml highlight"><pre><span></span><code><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;root&quot;</span>

<span class="k">[tool.pydantic-settings]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;default-table&quot;</span>

<span class="k">[tool.some-table]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some-table&quot;</span>
</code></pre></div>
<p>By default, <code>PyprojectTomlConfigSettingsSource</code> will only look for a "pyproject.toml" in the your current working directory.
However, there are two options to change this behavior.</p>
<ul>
<li><code>SettingsConfigDict(pyproject_toml_depth=&lt;int&gt;)</code> can be provided to check <code>&lt;int&gt;</code> number of directories <strong>up</strong> in the directory tree for a "pyproject.toml" if one is not found in the current working directory.
  By default, no parent directories are checked.</li>
<li>An explicit file path can be provided to the source when it is instantiated (e.g. <code>PyprojectTomlConfigSettingsSource(settings_cls, Path('~/.config').resolve() / 'pyproject.toml')</code>).
  If a file path is provided this way, it will be treated as absolute (no other locations are checked).</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DiscoverSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of discovering a pyproject.toml in parent directories in not in `Path.cwd()`.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">pyproject_toml_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ExplicitFilePathSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of explicitly providing the path to the file to load.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span>
                <span class="n">settings_cls</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.config&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;pyproject.toml&#39;</span>
            <span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
<h2 id="field-value-priority">Field value priority<a class="headerlink" href="#field-value-priority" title="Permanent link">&para;</a></h2>
<p>In the case where a value is specified for the same <code>Settings</code> field in multiple ways,
the selected value is determined as follows (in descending order of priority):</p>
<ol>
<li>If <code>cli_parse_args</code> is enabled, arguments passed in at the CLI.</li>
<li>Arguments passed to the <code>Settings</code> class initialiser.</li>
<li>Environment variables, e.g. <code>my_prefix_special_function</code> as described above.</li>
<li>Variables loaded from a dotenv (<code>.env</code>) file.</li>
<li>Variables loaded from the secrets directory.</li>
<li>The default field values for the <code>Settings</code> model.</li>
</ol>
<h2 id="customise-settings-sources">Customise settings sources<a class="headerlink" href="#customise-settings-sources" title="Permanent link">&para;</a></h2>
<p>If the default order of priority doesn't match your needs, it's possible to change it by overriding
the <code>settings_customise_sources</code> method of your <code>Settings</code> .</p>
<p><code>settings_customise_sources</code> takes four callables as arguments and returns any number of callables as a tuple.
In turn these callables are called to build the inputs to the fields of the settings class.</p>
<p>Each callable should take an instance of the settings class as its sole argument and return a <code>dict</code>.</p>
<h3 id="changing-priority">Changing Priority<a class="headerlink" href="#changing-priority" title="Permanent link">&para;</a></h3>
<p>The order of the returned callables decides the priority of inputs; first item is the highest priority.</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">PostgresDsn</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">init_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">database_dsn</span><span class="o">=</span><span class="s1">&#39;postgres://postgres@localhost:5432/kwargs_db&#39;</span><span class="p">))</span>
<span class="c1">#&gt; database_dsn=PostgresDsn(&#39;postgres://postgres@localhost:5432/kwargs_db&#39;)</span>
</code></pre></div>
<p>By flipping <code>env_settings</code> and <code>init_settings</code>, environment variables now have precedence over <code>__init__</code> kwargs.</p>
<h3 id="adding-sources">Adding sources<a class="headerlink" href="#adding-sources" title="Permanent link">&para;</a></h3>
<p>As explained earlier, <em>pydantic</em> ships with multiples built-in settings sources. However, you may occasionally
need to add your own custom sources, <code>settings_customise_sources</code> makes this very easy:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic.fields</span><span class="w"> </span><span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source class that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;env_file_encoding&#39;</span><span class="p">)</span>
        <span class="n">file_content_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tests/example_test_config.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="n">file_content_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_cls</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_value</span><span class="p">,</span> <span class="n">field_key</span><span class="p">,</span> <span class="n">value_is_complex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_value</span><span class="p">(</span>
                <span class="n">field</span><span class="p">,</span> <span class="n">field_name</span>
            <span class="p">)</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_field_value</span><span class="p">(</span>
                <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">value_is_complex</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">field_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_value</span>

        <span class="k">return</span> <span class="n">d</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foobar=&#39;test&#39;</span>
</code></pre></div>
<h4 id="accessing-the-result-of-previous-sources">Accessing the result of previous sources<a class="headerlink" href="#accessing-the-result-of-previous-sources" title="Permanent link">&para;</a></h4>
<p>Each source of settings can access the output of the previous ones.</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic.fields</span><span class="w"> </span><span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="c1"># Retrieve the aggregated settings from previous sources</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span>
        <span class="n">current_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Retrive settings from all sources individually</span>
        <span class="c1"># self.settings_sources_data[&quot;SettingsSourceName&quot;]: dict[str, Any]</span>
        <span class="n">settings_sources_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_sources_data</span>
        <span class="n">settings_sources_data</span><span class="p">[</span><span class="s1">&#39;SomeSettingsSource&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Your code here...</span>
</code></pre></div>
<h3 id="removing-sources">Removing sources<a class="headerlink" href="#removing-sources" title="Permanent link">&para;</a></h3>
<p>You might also want to disable a source:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">ValidationError</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_api_key</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="c1"># here we choose to ignore arguments from init_settings</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">(</span><span class="n">my_api_key</span><span class="o">=</span><span class="s1">&#39;this is ignored&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc_info</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    my_api_key</span>
<span class="sd">      Field required [type=missing, input_value={}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="in-place-reloading">In-place reloading<a class="headerlink" href="#in-place-reloading" title="Permanent link">&para;</a></h2>
<p>In case you want to reload in-place an existing setting, you can do it by using its <code>__init__</code> method :</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic_settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>


<span class="n">mutable_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; bar</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>
</code></pre></div>







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
  <script src="/flarelytics/client.js"></script>
      <script>
    window.mkdocs_run_deps = ["https://docs.pydantic.dev/dev/pydantic-2.13.0a0+dev-py3-none-any.whl", "email-validator>=2.0.0", "pydantic-core==2.41.4", "pydantic-extra-types==2.10.6"]
    </script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "announce.dismiss", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/algoliasearch@5.20.0/dist/lite/builds/browser.umd.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.77.3/dist/instantsearch.production.min.js"></script>
      
        <script src="../../extra/algolia.js"></script>
      
        <script src="../../extra/feedback.js"></script>
      
        <script src="../../extra/fluff.js"></script>
      
        <script src="../../extra/mathjax.js"></script>
      
        <script src="https://samuelcolvin.github.io/mkdocs-run-code/run_code_main.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>